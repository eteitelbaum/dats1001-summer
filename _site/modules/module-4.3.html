<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Module 4.3 – DATS 1001–Fall Schedule</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/ds4all-logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-f428fda71a3abb5b1b9c21151da8fd61.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-6ec1ea2183979a90750e7180bf9040de.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-f428fda71a3abb5b1b9c21151da8fd61.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-8ba55214e2cf2b8151fd22e466944314.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-72ecc774e5eb6ee2146fcd9ff417b5a6.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../site_libs/bootstrap/bootstrap-8ba55214e2cf2b8151fd22e466944314.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link href="../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="../site_libs/plotly-binding-4.10.4/plotly.js"></script><script src="../site_libs/typedarray-0.1/typedarray.min.js"></script><script src="../site_libs/jquery-3.5.1/jquery.min.js"></script><link href="../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script><link href="../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<meta property="og:title" content="Module 4.3 – DATS 1001–Fall Schedule">
<meta property="og:description" content="Dealing with Outliers">
<meta property="og:image" content="https://ds4all.rocks/modules/module-4.3_files/figure-html/unnamed-chunk-2-1.png">
<meta property="og:site_name" content="DATS 1001--Fall Schedule">
<meta property="og:image:height" content="960">
<meta property="og:image:width" content="1344">
<meta name="twitter:title" content="Module 4.3 – DATS 1001–Fall Schedule">
<meta name="twitter:description" content="Dealing with Outliers">
<meta name="twitter:image" content="https://ds4all.rocks/modules/module-4.3_files/figure-html/unnamed-chunk-2-1.png">
<meta name="twitter:image-height" content="960">
<meta name="twitter:image-width" content="1344">
<meta name="twitter:card" content="summary_large_image">
</head>
<body class="nav-sidebar docked quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Module 4.3</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/ds4all-logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none"></a>
      <div class="sidebar-tools-main tools-wide">
    <a href="https://blackboard.gwu.edu" title="Blackboard" class="quarto-navigation-tool px-1" aria-label="Blackboard"><i class="bi bi-mortarboard-fill"></i></a>
    <a href="https://library.gwu.edu/work-data" title="Gelman Data Services" class="quarto-navigation-tool px-1" aria-label="Gelman Data Services"><i class="bi bi-bar-chart-fill"></i></a>
    <a href="https://posit.cloud" title="Access R and RStudio" class="quarto-navigation-tool px-1" aria-label="Access R and RStudio"><i class="bi bi-r-circle"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Course information</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-description.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Description</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-support.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Support</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../instructor.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Instructor</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schedule</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-links.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Useful links</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../faq.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FAQ</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Coding Asignments</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/coding-assignment-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/coding-assignment-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/coding-assignment-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/coding-assignment-4.qmd" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 4</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Project</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/project-assignment-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/project-assignment-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/project-assignment-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/project-datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Datasets</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">Weekly materials</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 4</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li>
<a href="#what-are-outliers-and-why-do-they-matter" id="toc-what-are-outliers-and-why-do-they-matter" class="nav-link" data-scroll-target="#what-are-outliers-and-why-do-they-matter">What Are Outliers and Why Do They Matter?</a>
  <ul class="collapse">
<li><a href="#types-of-outliers-in-regression" id="toc-types-of-outliers-in-regression" class="nav-link" data-scroll-target="#types-of-outliers-in-regression">Types of Outliers in Regression</a></li>
  </ul>
</li>
  <li>
<a href="#identifying-outliers-visual-and-statistical-methods" id="toc-identifying-outliers-visual-and-statistical-methods" class="nav-link" data-scroll-target="#identifying-outliers-visual-and-statistical-methods">Identifying Outliers: Visual and Statistical Methods</a>
  <ul class="collapse">
<li><a href="#boxplots-for-visual-identification" id="toc-boxplots-for-visual-identification" class="nav-link" data-scroll-target="#boxplots-for-visual-identification">Boxplots for Visual Identification</a></li>
  <li><a href="#the-iqr-method" id="toc-the-iqr-method" class="nav-link" data-scroll-target="#the-iqr-method">The IQR Method</a></li>
  <li><a href="#identifying-influential-points-in-regression" id="toc-identifying-influential-points-in-regression" class="nav-link" data-scroll-target="#identifying-influential-points-in-regression">Identifying Influential Points in Regression</a></li>
  </ul>
</li>
  <li>
<a href="#dealing-with-outliers-strategies-and-considerations" id="toc-dealing-with-outliers-strategies-and-considerations" class="nav-link" data-scroll-target="#dealing-with-outliers-strategies-and-considerations">Dealing with Outliers: Strategies and Considerations</a>
  <ul class="collapse">
<li><a href="#removing-outliers" id="toc-removing-outliers" class="nav-link" data-scroll-target="#removing-outliers">Removing Outliers</a></li>
  <li><a href="#data-transformation" id="toc-data-transformation" class="nav-link" data-scroll-target="#data-transformation">Data Transformation</a></li>
  <li><a href="#winsorizing" id="toc-winsorizing" class="nav-link" data-scroll-target="#winsorizing">Winsorizing</a></li>
  <li><a href="#robust-regression" id="toc-robust-regression" class="nav-link" data-scroll-target="#robust-regression">Robust Regression</a></li>
  </ul>
</li>
  <li><a href="#making-the-right-choice" id="toc-making-the-right-choice" class="nav-link" data-scroll-target="#making-the-right-choice">Making the Right Choice</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/eteitelbaum/dats1001-summer/edit/main/modules/module-4.3.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/eteitelbaum/dats1001-summer/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Module 4.3</h1>
<p class="subtitle lead">Dealing with Outliers</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prework
</div>
</div>
<div class="callout-body-container callout-body">
<p>Run this code chunk to load the necessary packages and data for this module:</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://creativecommons.org/licenses/by-sa/4.0/">vdemlite</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load V-Dem data for 2019</span></span>
<span><span class="va">model_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://eteitelbaum.github.io/vdemlite/reference/fetchdem.html">fetchdem</a></span><span class="op">(</span></span>
<span>  indicators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"v2x_libdem"</span>, </span>
<span>  <span class="st">"e_gdppc"</span>, </span>
<span>  <span class="st">"v2cacamps"</span><span class="op">)</span>,</span>
<span>  start_year <span class="op">=</span> <span class="fl">2019</span>, </span>
<span>  end_year <span class="op">=</span> <span class="fl">2019</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span></span>
<span>    country <span class="op">=</span> <span class="va">country_name</span>, </span>
<span>    lib_dem <span class="op">=</span> <span class="va">v2x_libdem</span>, </span>
<span>    wealth <span class="op">=</span> <span class="va">e_gdppc</span>,</span>
<span>    polarization <span class="op">=</span> <span class="va">v2cacamps</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">lib_dem</span><span class="op">)</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">wealth</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
<section id="overview" class="level2"><h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>Remember those wealthy but undemocratic countries (like Saudi Arabia and UAE) that appeared as outliers in our GDP-democracy analysis? In this module, we’ll learn systematic approaches for identifying and handling such outliers. You’ll discover that outliers aren’t always “bad” data points to remove—sometimes they represent the most interesting cases in your analysis!</p>
<p>We will explore a number of key strategies for dealing with outliers once identified, helping you make informed decisions for your own projects. By the end of this module, you’ll have a toolkit for handling outliers in your regression analyses and understand when each approach is most appropriate.</p>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/OYwq0MlY11g?si=YV1JVOTqTLUJgk0U" title="What Should You Do with Outliers?" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
</section><section id="what-are-outliers-and-why-do-they-matter" class="level2"><h2 class="anchored" data-anchor-id="what-are-outliers-and-why-do-they-matter">What Are Outliers and Why Do They Matter?</h2>
<p>Let’s start by revisiting our democracy and GDP analysis from Module 4.1. Remember this plot?</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://plotly-r.com">plotly</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create custom tooltip</span></span>
<span><span class="va">model_data</span> <span class="op">&lt;-</span> <span class="va">model_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    tooltip <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span></span>
<span>      <span class="st">"Country: "</span>, <span class="va">country</span>,</span>
<span>      <span class="st">"&lt;br&gt;Wealth: "</span>, <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/dollar_format.html">label_dollar</a></span><span class="op">(</span>suffix <span class="op">=</span> <span class="st">"k"</span><span class="op">)</span><span class="op">(</span><span class="va">wealth</span><span class="op">)</span>,</span>
<span>      <span class="st">"&lt;br&gt;Democracy: "</span>, <span class="va">lib_dem</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="co"># Create the scatter plot with log transformation on GDP</span></span>
<span><span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">model_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wealth</span>, y <span class="op">=</span> <span class="va">lib_dem</span>, text <span class="op">=</span> <span class="va">tooltip</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_log10</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/dollar_format.html">label_dollar</a></span><span class="op">(</span>suffix <span class="op">=</span> <span class="st">"k"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"GDP per Capita"</span>, </span>
<span>       y <span class="op">=</span> <span class="st">"Liberal Democracy Score"</span>,</span>
<span>       title <span class="op">=</span> <span class="st">"Wealth and Democracy Around the World"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plotlify it</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly</a></span><span class="op">(</span><span class="va">plot</span>, tooltip <span class="op">=</span> <span class="st">"text"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">config</span><span class="op">(</span>displayModeBar <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-f00ea218257a9a070f64" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-f00ea218257a9a070f64">{"x":{"data":[{"x":[1.2256710430811442,1.0701117827822002,1.6884554184522125,1.7490402687034572,0.74880800495860222,1.0548045002209547,1.5917433574598405,0.75534118381154758,1.4083417411546548,1.0521165505499981,0.93267665862240068,0.17318626841227402,1.1353235081066773,1.4358443659844413,1.0702965181977651,1.7827663544132619,1.4595884792320082,0.72713442376048865,0.61804809671209271,0.7897921677306754,0.21906033244886131,0.68699356626467856,0.38810120157051664,0.65934563574617699,1.0388982121145325,0.50609895992844045,1.336959785120704,0.69810054562338997,0.84267163376078846,0.24179543129519873,1.2182203041755453,0.32407657973948639,0.83180580867439102,0.52943035436698593,0.25358028956218281,1.6126461317557277,0.88694170598341537,1.0117818305481068,0.61637047229126951,0.87806198129001256,0.39005149645898729,1.6970374433691429,1.2293234078961834,0.31638975107319545,0.07554696139253074,0.46254772880266409,1.0587296207517201,0.35888620440586905,0.62675085368339323,1.0187420957623821,0.20736503746907187,0.43695733066944958,0.68042617085814538,0.076276255404217605,0.46119828862249318,0.49290001110870341,0.4237372499823292,0.58804749698608272,0.57599562020326767,1.6707003252319739,1.6818470174042197,1.1788331173591167,-0.13371266091580511,0.81117269506655432,-0.082494490447453356,1.366329550519106,1.2429635918214832,0.54369563230924478,0.99791036734674343,1.6090498660475809,1.6581736302239891,0.85321133450331699,0.98891552051268672,0.99060521142391944,1.8777570860541808,1.5285953576940683,0.86266795022858789,1.4404840208233987,0.48699688843182259,0.074816440645174717,0.11627558758054428,1.1680847961406828,0.96955568422084359,0.90243805619866502,1.694157513347289,1.3975924340381167,0.60584353905808919,1.9041202134761996,0.22349594096239453,1.5574470461493592,0.63164666295841954,1.0357898331277571,1.372893600271661,1.0032019465216924,1.6130168302836816,1.3207277266441733,1.0650566033560185,0.73174988352726344,1.0903638794717181,1.1522883443830565,1.3181885941517959,0.48043814717781713,0.23477029516091652,1.1870692712304234,-0.039529222465701036,0.48472680429866183,0.79042591739111068,1.1972529829973899,1.3234171213504193,1.0416689664756102,0.35621713421973517,1.1060548400937864,0.21404867941194144,0.87846434534146889,1.3770693648196528,0.69897000433601886,0.79455775125476158,1.0655797147284485,0.11627558758054428,0.9176630243273749,0.96997473012171509,0.36679638328672992,0.23401081758717934,1.099507993727965,0.95458016274375734,0.57229060615141758,0.25623653320592293,1.4477005604345132,1.3984434983034844,1.0292213942539279,1.664585570012582,1.4777866629092395,1.2523432243800858,1.6454419202385278,1.0786380383696725,1.3010734229408438,0.43280900503316827,1.3699946616084282,0.95400116768157017,1.4959603948817051,1.5566401540717196,1.6856163571494998,1.3237881899007506,1.498462185706233,1.0220982974611403,1.6096690971852434,1.3943641126271287,1.0424573745743209,1.7367867934493351,1.5915431807515372,1.6533090129384789,1.5022222157664757,1.9656202664183426,1.137923512040415,1.4193774051391275,1.6061770696622117,1.3979921208831958,1.2213098902969297,1.5794405971397971,1.7529621946243312,1.3370597263205246,0.98145616652212664,1.2945323573418699,0.52724311638808863,1.5219614158002237,1.1497424147134043,1.4674601095072639,1.8574832669524506,1.4904922351216439,1.5513035818962273,0.3979400086720376,0.50974001557038229,1.8104207163063415,1.4121916552415692],"y":[0.434,0.57999999999999996,0.871,0.86599999999999999,0.61499999999999999,0.60699999999999998,0.755,0.26000000000000001,0.105,0.432,0.11899999999999999,0.040000000000000001,0.50700000000000001,0.50700000000000001,0.53600000000000003,0.73699999999999999,0.81999999999999995,0.40100000000000002,0.096000000000000002,0.253,0.23300000000000001,0.23400000000000001,0.32000000000000001,0.23899999999999999,0.69699999999999995,0.57299999999999995,0.062,0.075999999999999998,0.121,0.184,0.63100000000000001,0.159,0.32500000000000001,0.39500000000000002,0.014999999999999999,0.78300000000000003,0.49199999999999999,0.27500000000000002,0.36199999999999999,0.29599999999999999,0.33700000000000002,0.72299999999999998,0.185,0.21299999999999999,0.058999999999999997,0.34100000000000003,0.52500000000000002,0.48199999999999998,0.065000000000000002,0.46200000000000002,0.254,0.47799999999999998,0.047,0.39900000000000002,0.27800000000000002,0.19500000000000001,0.14499999999999999,0.33000000000000002,0.187,0.78100000000000003,0.78000000000000003,0.56100000000000005,0.053999999999999999,0.70399999999999996,0.22,0.76700000000000002,0.84399999999999997,0.51300000000000001,0.45300000000000001,0.80000000000000004,0.83699999999999997,0.42499999999999999,0.123,0.22900000000000001,0.82499999999999996,0.78100000000000003,0.23899999999999999,0.749,0.48899999999999999,0.41199999999999998,0.41199999999999998,0.41199999999999998,0.54100000000000004,0.23999999999999999,0.82099999999999995,0.54100000000000004,0.34799999999999998,0.084000000000000005,0.38200000000000001,0.80700000000000005,0.027,0.63100000000000001,0.113,0.317,0.79000000000000004,0.83999999999999997,0.14799999999999999,0.184,0.63100000000000001,0.065000000000000002,0.112,0.122,0.088999999999999996,0.048000000000000001,0.14499999999999999,0.095000000000000001,0.121,0.29999999999999999,0.0089999999999999993,0.20699999999999999,0.42199999999999999,0.496,0.33400000000000002,0.70599999999999996,0.114,0.32100000000000001,0.10100000000000001,0.14799999999999999,0.25800000000000001,0.443,0.51900000000000002,0.12,0.10100000000000001,0.434,0.112,0.042999999999999997,0.214,0.64100000000000001,0.036999999999999998,0.076999999999999999,0.79200000000000004,0.051999999999999998,0.66500000000000004,0.83899999999999997,0.34999999999999998,0.51000000000000001,0.115,0.623,0.063,0.71499999999999997,0.71199999999999997,0.88400000000000001,0.056000000000000001,0.84499999999999997,0.27000000000000002,0.83899999999999997,0.77000000000000002,0.443,0.77900000000000003,0.627,0.29599999999999999,0.755,0.79800000000000004,0.41599999999999998,0.33900000000000002,0.57999999999999996,0.59299999999999997,0.35699999999999998,0.84199999999999997,0.85199999999999998,0.14000000000000001,0.42299999999999999,0.55400000000000005,0.58299999999999996,0.047,0.28699999999999998,0.53700000000000003,0.33300000000000002,0.746,0.74299999999999999,0.47799999999999998,0.64200000000000002,0.091999999999999998,0.36799999999999999],"text":["Country: Mexico<br>Wealth: $16.81k<br>Democracy: 0.434","Country: Suriname<br>Wealth: $11.75k<br>Democracy: 0.58","Country: Sweden<br>Wealth: $48.80k<br>Democracy: 0.871","Country: Switzerland<br>Wealth: $56.11k<br>Democracy: 0.866","Country: Ghana<br>Wealth: $5.61k<br>Democracy: 0.615","Country: South Africa<br>Wealth: $11.34k<br>Democracy: 0.607","Country: Japan<br>Wealth: $39.06k<br>Democracy: 0.755","Country: Burma/Myanmar<br>Wealth: $5.69k<br>Democracy: 0.26","Country: Russia<br>Wealth: $25.61k<br>Democracy: 0.105","Country: Albania<br>Wealth: $11.28k<br>Democracy: 0.432","Country: Egypt<br>Wealth: $8.56k<br>Democracy: 0.119","Country: Yemen<br>Wealth: $1.49k<br>Democracy: 0.04","Country: Colombia<br>Wealth: $13.66k<br>Democracy: 0.507","Country: Poland<br>Wealth: $27.28k<br>Democracy: 0.507","Country: Brazil<br>Wealth: $11.76k<br>Democracy: 0.536","Country: United States of America<br>Wealth: $60.64k<br>Democracy: 0.737","Country: Portugal<br>Wealth: $28.81k<br>Democracy: 0.82","Country: El Salvador<br>Wealth: $5.34k<br>Democracy: 0.401","Country: Bangladesh<br>Wealth: $4.15k<br>Democracy: 0.096","Country: Bolivia<br>Wealth: $6.16k<br>Democracy: 0.253","Country: Haiti<br>Wealth: $1.66k<br>Democracy: 0.233","Country: Honduras<br>Wealth: $4.86k<br>Democracy: 0.234","Country: Mali<br>Wealth: $2.44k<br>Democracy: 0.32","Country: Pakistan<br>Wealth: $4.56k<br>Democracy: 0.239","Country: Peru<br>Wealth: $10.94k<br>Democracy: 0.697","Country: Senegal<br>Wealth: $3.21k<br>Democracy: 0.573","Country: South Sudan<br>Wealth: $21.72k<br>Democracy: 0.062","Country: Sudan<br>Wealth: $4.99k<br>Democracy: 0.076","Country: Vietnam<br>Wealth: $6.96k<br>Democracy: 0.121","Country: Afghanistan<br>Wealth: $1.74k<br>Democracy: 0.184","Country: Argentina<br>Wealth: $16.53k<br>Democracy: 0.631","Country: Ethiopia<br>Wealth: $2.11k<br>Democracy: 0.159","Country: India<br>Wealth: $6.79k<br>Democracy: 0.325","Country: Kenya<br>Wealth: $3.38k<br>Democracy: 0.395","Country: North Korea<br>Wealth: $1.79k<br>Democracy: 0.015","Country: South Korea<br>Wealth: $40.99k<br>Democracy: 0.783","Country: Kosovo<br>Wealth: $7.71k<br>Democracy: 0.492","Country: Lebanon<br>Wealth: $10.28k<br>Democracy: 0.275","Country: Nigeria<br>Wealth: $4.13k<br>Democracy: 0.362","Country: Philippines<br>Wealth: $7.55k<br>Democracy: 0.296","Country: Tanzania<br>Wealth: $2.46k<br>Democracy: 0.337","Country: Taiwan<br>Wealth: $49.78k<br>Democracy: 0.723","Country: Thailand<br>Wealth: $16.96k<br>Democracy: 0.185","Country: Uganda<br>Wealth: $2.07k<br>Democracy: 0.213","Country: Venezuela<br>Wealth: $1.19k<br>Democracy: 0.059","Country: Benin<br>Wealth: $2.90k<br>Democracy: 0.341","Country: Bhutan<br>Wealth: $11.45k<br>Democracy: 0.525","Country: Burkina Faso<br>Wealth: $2.28k<br>Democracy: 0.482","Country: Cambodia<br>Wealth: $4.23k<br>Democracy: 0.065","Country: Indonesia<br>Wealth: $10.44k<br>Democracy: 0.462","Country: Mozambique<br>Wealth: $1.61k<br>Democracy: 0.254","Country: Nepal<br>Wealth: $2.74k<br>Democracy: 0.478","Country: Nicaragua<br>Wealth: $4.79k<br>Democracy: 0.047","Country: Niger<br>Wealth: $1.19k<br>Democracy: 0.399","Country: Zambia<br>Wealth: $2.89k<br>Democracy: 0.278","Country: Zimbabwe<br>Wealth: $3.11k<br>Democracy: 0.195","Country: Guinea<br>Wealth: $2.65k<br>Democracy: 0.145","Country: Ivory Coast<br>Wealth: $3.87k<br>Democracy: 0.33","Country: Mauritania<br>Wealth: $3.77k<br>Democracy: 0.187","Country: Canada<br>Wealth: $46.85k<br>Democracy: 0.781","Country: Australia<br>Wealth: $48.07k<br>Democracy: 0.78","Country: Botswana<br>Wealth: $15.10k<br>Democracy: 0.561","Country: Burundi<br>Wealth: $0.74k<br>Democracy: 0.054","Country: Cape Verde<br>Wealth: $6.47k<br>Democracy: 0.704","Country: Central African Republic<br>Wealth: $0.83k<br>Democracy: 0.22","Country: Chile<br>Wealth: $23.24k<br>Democracy: 0.767","Country: Costa Rica<br>Wealth: $17.50k<br>Democracy: 0.844","Country: Timor-Leste<br>Wealth: $3.50k<br>Democracy: 0.513","Country: Ecuador<br>Wealth: $9.95k<br>Democracy: 0.453","Country: France<br>Wealth: $40.65k<br>Democracy: 0.8","Country: Germany<br>Wealth: $45.52k<br>Democracy: 0.837","Country: Guatemala<br>Wealth: $7.13k<br>Democracy: 0.425","Country: Iran<br>Wealth: $9.75k<br>Democracy: 0.123","Country: Iraq<br>Wealth: $9.79k<br>Democracy: 0.229","Country: Ireland<br>Wealth: $75.47k<br>Democracy: 0.825","Country: Italy<br>Wealth: $33.78k<br>Democracy: 0.781","Country: Jordan<br>Wealth: $7.29k<br>Democracy: 0.239","Country: Latvia<br>Wealth: $27.57k<br>Democracy: 0.749","Country: Lesotho<br>Wealth: $3.07k<br>Democracy: 0.489","Country: Liberia<br>Wealth: $1.19k<br>Democracy: 0.412","Country: Malawi<br>Wealth: $1.31k<br>Democracy: 0.412","Country: Maldives<br>Wealth: $14.73k<br>Democracy: 0.412","Country: Mongolia<br>Wealth: $9.32k<br>Democracy: 0.541","Country: Morocco<br>Wealth: $7.99k<br>Democracy: 0.24","Country: Netherlands<br>Wealth: $49.45k<br>Democracy: 0.821","Country: Panama<br>Wealth: $24.98k<br>Democracy: 0.541","Country: Papua New Guinea<br>Wealth: $4.04k<br>Democracy: 0.348","Country: Qatar<br>Wealth: $80.19k<br>Democracy: 0.084","Country: Sierra Leone<br>Wealth: $1.67k<br>Democracy: 0.382","Country: Spain<br>Wealth: $36.10k<br>Democracy: 0.807","Country: Syria<br>Wealth: $4.28k<br>Democracy: 0.027","Country: Tunisia<br>Wealth: $10.86k<br>Democracy: 0.631","Country: Türkiye<br>Wealth: $23.60k<br>Democracy: 0.113","Country: Ukraine<br>Wealth: $10.07k<br>Democracy: 0.317","Country: United Kingdom<br>Wealth: $41.02k<br>Democracy: 0.79","Country: Uruguay<br>Wealth: $20.93k<br>Democracy: 0.84","Country: Algeria<br>Wealth: $11.62k<br>Democracy: 0.148","Country: Angola<br>Wealth: $5.39k<br>Democracy: 0.184","Country: Armenia<br>Wealth: $12.31k<br>Democracy: 0.631","Country: Azerbaijan<br>Wealth: $14.20k<br>Democracy: 0.065","Country: Belarus<br>Wealth: $20.81k<br>Democracy: 0.112","Country: Cameroon<br>Wealth: $3.02k<br>Democracy: 0.122","Country: Chad<br>Wealth: $1.72k<br>Democracy: 0.089","Country: China<br>Wealth: $15.38k<br>Democracy: 0.048","Country: Democratic Republic of the Congo<br>Wealth: $0.91k<br>Democracy: 0.145","Country: Republic of the Congo<br>Wealth: $3.05k<br>Democracy: 0.095","Country: Djibouti<br>Wealth: $6.17k<br>Democracy: 0.121","Country: Dominican Republic<br>Wealth: $15.75k<br>Democracy: 0.3","Country: Eritrea<br>Wealth: $21.06k<br>Democracy: 0.009","Country: Gabon<br>Wealth: $11.01k<br>Democracy: 0.207","Country: The Gambia<br>Wealth: $2.27k<br>Democracy: 0.422","Country: Georgia<br>Wealth: $12.77k<br>Democracy: 0.496","Country: Guinea-Bissau<br>Wealth: $1.64k<br>Democracy: 0.334","Country: Jamaica<br>Wealth: $7.56k<br>Democracy: 0.706","Country: Kazakhstan<br>Wealth: $23.83k<br>Democracy: 0.114","Country: Kyrgyzstan<br>Wealth: $5.00k<br>Democracy: 0.321","Country: Laos<br>Wealth: $6.23k<br>Democracy: 0.101","Country: Libya<br>Wealth: $11.63k<br>Democracy: 0.148","Country: Madagascar<br>Wealth: $1.31k<br>Democracy: 0.258","Country: Moldova<br>Wealth: $8.27k<br>Democracy: 0.443","Country: Namibia<br>Wealth: $9.33k<br>Democracy: 0.519","Country: Rwanda<br>Wealth: $2.33k<br>Democracy: 0.12","Country: Somalia<br>Wealth: $1.71k<br>Democracy: 0.101","Country: Sri Lanka<br>Wealth: $12.58k<br>Democracy: 0.434","Country: Eswatini<br>Wealth: $9.01k<br>Democracy: 0.112","Country: Tajikistan<br>Wealth: $3.74k<br>Democracy: 0.043","Country: Togo<br>Wealth: $1.80k<br>Democracy: 0.214","Country: Trinidad and Tobago<br>Wealth: $28.04k<br>Democracy: 0.641","Country: Turkmenistan<br>Wealth: $25.03k<br>Democracy: 0.037","Country: Uzbekistan<br>Wealth: $10.70k<br>Democracy: 0.077","Country: Austria<br>Wealth: $46.19k<br>Democracy: 0.792","Country: Bahrain<br>Wealth: $30.05k<br>Democracy: 0.052","Country: Barbados<br>Wealth: $17.88k<br>Democracy: 0.665","Country: Belgium<br>Wealth: $44.20k<br>Democracy: 0.839","Country: Bosnia and Herzegovina<br>Wealth: $11.98k<br>Democracy: 0.35","Country: Bulgaria<br>Wealth: $20.00k<br>Democracy: 0.51","Country: Comoros<br>Wealth: $2.71k<br>Democracy: 0.115","Country: Croatia<br>Wealth: $23.44k<br>Democracy: 0.623","Country: Cuba<br>Wealth: $8.99k<br>Democracy: 0.063","Country: Cyprus<br>Wealth: $31.33k<br>Democracy: 0.715","Country: Czechia<br>Wealth: $36.03k<br>Democracy: 0.712","Country: Denmark<br>Wealth: $48.49k<br>Democracy: 0.884","Country: Equatorial Guinea<br>Wealth: $21.08k<br>Democracy: 0.056","Country: Estonia<br>Wealth: $31.51k<br>Democracy: 0.845","Country: Fiji<br>Wealth: $10.52k<br>Democracy: 0.27","Country: Finland<br>Wealth: $40.71k<br>Democracy: 0.839","Country: Greece<br>Wealth: $24.80k<br>Democracy: 0.77","Country: Guyana<br>Wealth: $11.03k<br>Democracy: 0.443","Country: Iceland<br>Wealth: $54.55k<br>Democracy: 0.779","Country: Israel<br>Wealth: $39.04k<br>Democracy: 0.627","Country: Kuwait<br>Wealth: $45.01k<br>Democracy: 0.296","Country: Lithuania<br>Wealth: $31.78k<br>Democracy: 0.755","Country: Luxembourg<br>Wealth: $92.39k<br>Democracy: 0.798","Country: North Macedonia<br>Wealth: $13.74k<br>Democracy: 0.416","Country: Malaysia<br>Wealth: $26.26k<br>Democracy: 0.339","Country: Malta<br>Wealth: $40.38k<br>Democracy: 0.58","Country: Mauritius<br>Wealth: $25.00k<br>Democracy: 0.593","Country: Montenegro<br>Wealth: $16.65k<br>Democracy: 0.357","Country: New Zealand<br>Wealth: $37.97k<br>Democracy: 0.842","Country: Norway<br>Wealth: $56.62k<br>Democracy: 0.852","Country: Oman<br>Wealth: $21.73k<br>Democracy: 0.14","Country: Paraguay<br>Wealth: $9.58k<br>Democracy: 0.423","Country: Romania<br>Wealth: $19.70k<br>Democracy: 0.554","Country: Sao Tome and Principe<br>Wealth: $3.37k<br>Democracy: 0.583","Country: Saudi Arabia<br>Wealth: $33.26k<br>Democracy: 0.047","Country: Serbia<br>Wealth: $14.12k<br>Democracy: 0.287","Country: Seychelles<br>Wealth: $29.34k<br>Democracy: 0.537","Country: Singapore<br>Wealth: $72.02k<br>Democracy: 0.333","Country: Slovakia<br>Wealth: $30.94k<br>Democracy: 0.746","Country: Slovenia<br>Wealth: $35.59k<br>Democracy: 0.743","Country: Solomon Islands<br>Wealth: $2.50k<br>Democracy: 0.478","Country: Vanuatu<br>Wealth: $3.23k<br>Democracy: 0.642","Country: United Arab Emirates<br>Wealth: $64.63k<br>Democracy: 0.092","Country: Hungary<br>Wealth: $25.83k<br>Democracy: 0.368"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826498,"l":48.949771689497723},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Wealth and Democracy Around the World","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.23867930728251249,2.0705869127850498],"tickmode":"array","ticktext":["$1k","$10k","$100k"],"tickvals":[0,0.99999999999999989,2],"categoryorder":"array","categoryarray":["$1k","$10k","$100k"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"GDP per Capita","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.034750000000000003,0.92774999999999996],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75"],"tickvals":[0,0.25,0.5,0.75],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Liberal Democracy Score","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":false},"source":"A","attrs":{"16242b787aa7":{"x":{},"y":{},"text":{},"type":"scatter"}},"cur_data":"16242b787aa7","visdat":{"16242b787aa7":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Notice those points in the southwest corner—wealthy countries with low democracy scores. These are our <strong>outliers</strong>: observations that don’t fit the general pattern of the data. Try hovering over the points to see which countries they include.</p>
<p>But it is important to note that <strong>not all outliers are created equal</strong>. In our case, these outliers are not measurement errorr but instead substantively interesting cases! They largely represent oil-rich authoritarian states, which tells us something important about the relationship between wealth and democracy.</p>
<section id="types-of-outliers-in-regression" class="level3"><h3 class="anchored" data-anchor-id="types-of-outliers-in-regression">Types of Outliers in Regression</h3>
<p>In regression analysis, we distinguish between different types of unusual observations:</p>
<ul>
<li>
<strong>Leverage points</strong>: Extreme values on the x-axis (very high or low GDP)</li>
<li>
<strong>Influential points</strong>: Points that significantly change the regression line when removed</li>
<li>
<strong>Residual outliers</strong>: Points far from the regression line (high residuals)</li>
</ul>
<p>A point can be one, two, or all three of these simultaneously.</p>
</section></section><section id="identifying-outliers-visual-and-statistical-methods" class="level2"><h2 class="anchored" data-anchor-id="identifying-outliers-visual-and-statistical-methods">Identifying Outliers: Visual and Statistical Methods</h2>
<section id="boxplots-for-visual-identification" class="level3"><h3 class="anchored" data-anchor-id="boxplots-for-visual-identification">Boxplots for Visual Identification</h3>
<p>The simplest way to spot outliers is with boxplots. Let’s examine both our variables with boxplots. Here we will create boxplots for both the democracy scores and the raw GDP per capita (before any transformations) using <code><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot()</a></code>, which we learned about in an earlier lesson. We will store each object as a separate object and then use <code>patchwork</code> to combine them into a single figure.</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Create boxplots for both variables</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com">patchwork</a></span><span class="op">)</span>  <span class="co"># for combining plots</span></span>
<span></span>
<span><span class="co"># Boxplot for democracy scores</span></span>
<span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">model_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">lib_dem</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Liberal Democracy Score"</span>, </span>
<span>       title <span class="op">=</span> <span class="st">"Democracy Outliers"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Boxplot for raw GDP (before transformation)</span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">model_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">wealth</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/dollar_format.html">dollar_format</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"GDP per Capita"</span>, </span>
<span>       title <span class="op">=</span> <span class="st">"GDP Outliers (Raw Data)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Combine the plots</span></span>
<span><span class="va">p1</span> <span class="op">|</span> <span class="va">p2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="module-4.3_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="the-iqr-method" class="level3"><h3 class="anchored" data-anchor-id="the-iqr-method">The IQR Method</h3>
<p>The <strong>Interquartile Range (IQR) method</strong> is a common statistical approach for identifying outliers and forms the basis of the boxplot. It classifies a data point as an outlier if it falls more than 1.5 times the IQR below the first quartile (Q1) or above the third quartile (Q3). This helps flag unusually high or low values that may deserve further scrutiny.</p>
<p>In the code below, we identify outliers in GDP per capita using the base R function <code><a href="https://rdrr.io/r/grDevices/boxplot.stats.html">boxplot.stats()</a></code>, which applies the IQR method internally. We use the <code>%in%</code> operator to check which GDP values are identified as outliers and store this as a new logical column, gdp_outlier. Since our earlier boxplot analysis showed no democracy outliers, we simplify the analysis here by focusing only on GDP. We then summarize how many outliers there are and list the countries identified as GDP outliers.</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Identify GDP outliers </span></span>
<span><span class="va">model_data</span> <span class="op">&lt;-</span> <span class="va">model_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>gdp_outlier <span class="op">=</span> <span class="va">wealth</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/grDevices/boxplot.stats.html">boxplot.stats</a></span><span class="op">(</span><span class="va">wealth</span><span class="op">)</span><span class="op">$</span><span class="va">out</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Summarize how many outliers</span></span>
<span><span class="va">model_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span></span>
<span>    gdp_outliers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">gdp_outlier</span><span class="op">)</span>,</span>
<span>    percent_outliers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">gdp_outlier</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  gdp_outliers percent_outliers
1            6              3.4</code></pre>
</div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># View GDP outlier countries</span></span>
<span><span class="va">model_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">gdp_outlier</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">wealth</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">wealth</span>, <span class="va">lib_dem</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   country wealth lib_dem
1               Luxembourg 92.389   0.798
2                    Qatar 80.190   0.084
3                  Ireland 75.467   0.825
4                Singapore 72.025   0.333
5     United Arab Emirates 64.628   0.092
6 United States of America 60.641   0.737</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Understanding the Code
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the code above, we use the base R function <code><a href="https://rdrr.io/r/grDevices/boxplot.stats.html">boxplot.stats()</a></code> to identify GDP outliers. This function returns several components, including a named element called $out that contains the values considered outliers.</p>
<p>So when we write <code>wealth %in% boxplot.stats(wealth)$out</code> we are checking which values of wealth are included in the set of outliers returned by boxplot.stats(). The result is a logical vector (TRUE for outliers, FALSE otherwise), which we store in a new column using mutate().</p>
</div>
</div>
</section><section id="identifying-influential-points-in-regression" class="level3"><h3 class="anchored" data-anchor-id="identifying-influential-points-in-regression">Identifying Influential Points in Regression</h3>
<p>To assess the quality of a regression model and identify observations that may unduly affect the results, we can compute <strong>diagnostic statistics</strong>. These help us detect data points that are surprising, unusual, or overly influential in determining the regression line. While there are multiple diagnostic measures, three are commonly used: <strong>leverage</strong>, <strong>standardized residuals</strong>, and <strong>Cook’s distance</strong>.</p>
<p>We use the <code>broom</code> package’s <code><a href="https://generics.r-lib.org/reference/augment.html">augment()</a></code> function to compute these diagnostics in a tidy, data-frame format. <code><a href="https://generics.r-lib.org/reference/augment.html">augment()</a></code> takes a fitted model object (like one created by <code><a href="https://rdrr.io/r/stats/lm.html">lm()</a></code>) and returns the original data along with new columns containing fitted values, residuals, and other diagnostic measures:</p>
<ul>
<li>
<code>.fitted</code>: the predicted values from the model</li>
<li>
<code>.resid</code>: the raw residuals (observed – fitted)</li>
<li>
<code>.std.resid</code>: standardized residuals (adjusted for their expected variance)</li>
<li>
<code>.hat</code>: leverage values, which measure how extreme the predictor values are</li>
<li>
<code>.cooksd</code>: Cook’s distance, which combines leverage and residual size to estimate how much a point influences the model</li>
</ul>
<p>These statistics allow us to flag potentially problematic points:</p>
<ul>
<li>
<strong>High leverage</strong> points have unusual predictor values. They don’t necessarily distort the model, but they have the potential to. A common rule of thumb is that leverage values greater than twice the mean are worth inspecting.</li>
<li>
<strong>High residual</strong> points are poorly fit by the model—they lie far from the regression line. Standardized residuals larger than ±2 are typically considered large.</li>
<li>
<strong>High influence</strong> points affect the model’s coefficients disproportionately. Cook’s distance greater than <code>4/n</code> (where <code>n</code> is the number of observations) is a common informal threshold.</li>
</ul>
<p>By combining these diagnostics, we can identify cases that might merit further attention—due to unusual inputs, poor fit, or disproportionate influence on the model’s results.</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://broom.tidymodels.org/">broom</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Fit model</span></span>
<span><span class="va">democracy_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">lib_dem</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">wealth</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">model_data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get model diagnostics (with original data attached)</span></span>
<span><span class="va">model_diagnostics</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://generics.r-lib.org/reference/augment.html">augment</a></span><span class="op">(</span><span class="va">democracy_model</span>, data <span class="op">=</span> <span class="va">model_data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add thresholds for outlier detection</span></span>
<span><span class="va">model_diagnostics</span> <span class="op">&lt;-</span> <span class="va">model_diagnostics</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    high_leverage <span class="op">=</span> <span class="va">.hat</span> <span class="op">&gt;</span> <span class="fl">2</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">.hat</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    high_residual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">.std.resid</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">2</span>,</span>
<span>    high_influence <span class="op">=</span> <span class="va">.cooksd</span> <span class="op">&gt;</span> <span class="fl">4</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">model_data</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter problematic cases</span></span>
<span><span class="va">model_diagnostics</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">high_leverage</span> <span class="op">|</span> <span class="va">high_residual</span> <span class="op">|</span> <span class="va">high_influence</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">wealth</span>, <span class="va">lib_dem</span>, <span class="va">high_leverage</span>, <span class="va">high_residual</span>, <span class="va">high_influence</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16 × 6
   country             wealth lib_dem high_leverage high_residual high_influence
   &lt;chr&gt;                &lt;dbl&gt;   &lt;dbl&gt; &lt;lgl&gt;         &lt;lgl&gt;         &lt;lgl&gt;         
 1 Venezuela            1.19    0.059 TRUE          FALSE         FALSE         
 2 Niger                1.19    0.399 TRUE          FALSE         FALSE         
 3 Burundi              0.735   0.054 TRUE          FALSE         FALSE         
 4 Central African Re…  0.827   0.22  TRUE          FALSE         FALSE         
 5 Ireland             75.5     0.825 TRUE          FALSE         FALSE         
 6 Liberia              1.19    0.412 TRUE          FALSE         FALSE         
 7 Malawi               1.31    0.412 TRUE          FALSE         FALSE         
 8 Qatar               80.2     0.084 TRUE          TRUE          TRUE          
 9 Democratic Republi…  0.913   0.145 TRUE          FALSE         FALSE         
10 Eritrea             21.1     0.009 FALSE         TRUE          FALSE         
11 Madagascar           1.31    0.258 TRUE          FALSE         FALSE         
12 Turkmenistan        25.0     0.037 FALSE         TRUE          FALSE         
13 Bahrain             30.0     0.052 FALSE         TRUE          TRUE          
14 Luxembourg          92.4     0.798 TRUE          FALSE         FALSE         
15 Saudi Arabia        33.3     0.047 FALSE         TRUE          TRUE          
16 United Arab Emirat… 64.6     0.092 FALSE         TRUE          TRUE          </code></pre>
</div>
</div>
<p>The analysis identified a fairly large number of cases as having high leverage, large residuals, or high influence. But it is important to note that these are not necessarily errors in the data or points that necessarily have to be removed. Rather, they are observations that deviate from what the model expects and exert a disproportionate pull on the regression line.</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Your Turn!!
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Try running the regression with <code>polarization</code> as the independent variable instead of <code>wealth</code>.</li>
<li>Now use the code above to identify influential observations in this new model.</li>
<li>What do you notice? Are there any countries that are influential in both models? Or are most of the influential points new ones?</li>
</ul>
</div>
</div>
</section></section><section id="dealing-with-outliers-strategies-and-considerations" class="level2"><h2 class="anchored" data-anchor-id="dealing-with-outliers-strategies-and-considerations">Dealing with Outliers: Strategies and Considerations</h2>
<p>Outliers and influential observations warrant closer inspection. Outliers may represent countries with unusual political or economic profiles, or cases that do not conform well to the general trend. Influential observations often reveal the limits of a simple model and can point to deeper questions about the structure of the data or the need for additional variables.</p>
<p>After considering extreme or influential data points more closely, we can decide what to do with them. One option is to do nothing and leave them in the dataset as is. Another option to assess how much they affect the results by re-estimating the model with and without them. Another option is to tranform the data to reduce their influence. Finally, we can perform an operation called <strong>winsorizing</strong>, which caps extreme values at a specified percentile rather than removing them entirely.</p>
<section id="removing-outliers" class="level3"><h3 class="anchored" data-anchor-id="removing-outliers">Removing Outliers</h3>
<p>One approach is to remove outliers entirely. This is appropriate when the outliers represent data entry errors, they come from a different population than your main analysis, or you want to understand the relationship for the “typical” cases. But another option is to remove outliers or influential points termporarily to see how they affect the results. If they change the results significantly, this should be acknowledged and discussed.</p>
<p>Let’s start by rerunning the regression model with the original data, including all observations:</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">democracy_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">lib_dem</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">wealth</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">model_data</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">democracy_model</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = lib_dem ~ log(wealth), data = model_data)

Residuals:
     Min       1Q   Median       3Q      Max 
-0.57441 -0.14334  0.03911  0.18730  0.37017 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  0.13051    0.03806   3.429 0.000758 ***
log(wealth)  0.12040    0.01471   8.188 5.75e-14 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.2233 on 172 degrees of freedom
Multiple R-squared:  0.2805,    Adjusted R-squared:  0.2763 
F-statistic: 67.04 on 1 and 172 DF,  p-value: 5.754e-14</code></pre>
</div>
</div>
<p>Now let’s remove some of the problematic points we found earlier. Since we identified several countries as having high leverage, large residuals, or high influence, let’s see how removing them affects our regression results. We’ll fit the model both with and without these outliers and compare the results. Let’s start by removing the outliers.</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Remove countries with extreme leverage or influence</span></span>
<span><span class="va">model_data_no_outliers</span> <span class="op">&lt;-</span> <span class="va">model_diagnostics</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="va">high_leverage</span> <span class="op">|</span> <span class="op">!</span><span class="va">high_residual</span> <span class="op">|</span> <span class="op">!</span><span class="va">high_influence</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">wealth</span>, <span class="va">lib_dem</span>,<span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Understanding the Code
</div>
</div>
<div class="callout-body-container callout-body">
<p>Here we use the <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> function in conjunction with the <code>!</code> and <code>|</code> operators. The <code>!</code> operator negates the condition, so <code>!high_leverage</code> means “not high leverage.” The <code>|</code> operator means “or,” so we are filtering out any rows that have high leverage, large residuals, or high influence.</p>
</div>
</div>
<p>Now let’s fit the model without the outliers to see if our results substantially change.</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">model_without_outliers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">lib_dem</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">wealth</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">model_data_no_outliers</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">model_without_outliers</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = lib_dem ~ log(wealth), data = model_data_no_outliers)

Residuals:
     Min       1Q   Median       3Q      Max 
-0.55358 -0.14282  0.04255  0.18092  0.37282 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  0.12166    0.03756   3.239  0.00144 ** 
log(wealth)  0.12568    0.01459   8.614 4.53e-15 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.2195 on 171 degrees of freedom
Multiple R-squared:  0.3026,    Adjusted R-squared:  0.2985 
F-statistic:  74.2 on 1 and 171 DF,  p-value: 4.534e-15</code></pre>
</div>
</div>
<p>Here we do not notice a substantial difference between these results and those of the original model. We see that the coefficient for <code>log(wealth)</code> remains positive and statistically significant, and the R-squared value is similar. This suggests that while the outliers were influential, they did not fundamentally change the relationship between GDP and democracy in this case.</p>
</section><section id="data-transformation" class="level3"><h3 class="anchored" data-anchor-id="data-transformation">Data Transformation</h3>
<p>Now that we’ve identified outliers in our raw data, let’s see how <strong>transformations</strong> can help reduce their influence. We’ve already been using one transformation—taking the log of GDP! Let’s see why this helps with outliers.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="module-4.3_files/figure-html/log-transformation-comparison-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Notice how the log transformation improves the model fit. This is because logging compresses large values, reducing the influence of those extremely wealthy outlier countries.</p>
<p>Other common transformations, like the <strong>square root</strong> and <strong>Box-Cox transformations</strong>, can also help manage skewed data and reduce the influence of outliers. Like the log transformation, these approaches work by <strong>compressing large values</strong>, which pulls extreme observations closer to the main body of the data. This can lead to a better-fitting model and more stable inferences.</p>
<p>The <strong>square root transformation</strong> is useful when data are moderately skewed and values are all positive. It’s a simpler alternative to logging and is often used when data contain some high values but not extreme outliers.</p>
<p>The <strong>Box-Cox transformation</strong> is more flexible—it finds the “best” power transformation (e.g., square root, log, reciprocal) based on the data itself. It’s especially helpful when you’re unsure which transformation is appropriate. Like log and square root transformations, Box-Cox can improve linearity and reduce the impact of outliers.</p>
<p>When we compare models using different transformations, we often look at <strong>goodness-of-fit measures</strong> like <strong>R-squared</strong>, <strong>adjusted R-squared</strong>, and <strong>AIC</strong>. These metrics help us assess whether the transformation improves model fit while avoiding overfitting. In general, a <strong>higher adjusted R-squared</strong> and a <strong>lower AIC</strong> suggest a better-fitting model.</p>
<p>We won’t go deep into the code here, but it’s important to know that transformations are a standard part of the data science toolkit. They help models perform better when relationships are nonlinear or when extreme values distort the picture. The log transformation is one example—but not the only one—of how transforming variables can lead to more meaningful and interpretable results.</p>
</section><section id="winsorizing" class="level3"><h3 class="anchored" data-anchor-id="winsorizing">Winsorizing</h3>
<p><strong>Winsorizing</strong> is another technique to reduce the impact of extreme values, especially when we don’t want to throw out data points entirely. Unlike trimming (which removes outliers), Winsorizing <strong>caps</strong> them at a specified percentile. For example, using the 95th percentile replaces all values above it with the 95th percentile value.</p>
<p>This can help tame the influence of outliers in a way that’s <strong>less aggressive than deletion</strong> and doesn’t distort model assumptions as much as leaving extreme values untouched. It’s especially useful when you suspect that very high or low values are distorting the fit of your regression.</p>
<p>Let’s Winsorize our GDP data at the 95th percentile using the <code><a href="https://easystats.github.io/datawizard/reference/winsorize.html">winsorize()</a></code> function from the <code>datawizard</code> package. This will cap extreme values at the 95th percentile, reducing their influence without removing them entirely.</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://easystats.github.io/datawizard/">datawizard</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Winsorize the data</span></span>
<span><span class="va">model_data_winsorized</span> <span class="op">&lt;-</span> <span class="va">model_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    wealth_win95 <span class="op">=</span> <span class="fu"><a href="https://easystats.github.io/datawizard/reference/winsorize.html">winsorize</a></span><span class="op">(</span><span class="va">wealth</span>, threshold <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now let’s visualizing the winsorizing effects.</p>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Show the effect of winsorizing on raw GDP data</span></span>
<span><span class="va">original_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">model_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wealth</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">30</span>, alpha <span class="op">=</span> <span class="fl">0.7</span>, fill <span class="op">=</span> <span class="st">"darkblue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/dollar_format.html">label_dollar</a></span><span class="op">(</span>suffix <span class="op">=</span> <span class="st">"k"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Original Distribution"</span>, x <span class="op">=</span> <span class="st">"GDP per Capita"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">winsorized_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">model_data_winsorized</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wealth_win95</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">30</span>, alpha <span class="op">=</span> <span class="fl">0.7</span>, fill <span class="op">=</span> <span class="st">"darkred"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/dollar_format.html">label_dollar</a></span><span class="op">(</span>suffix <span class="op">=</span> <span class="st">"k"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Winsorized Distribution"</span>, x <span class="op">=</span> <span class="st">"GDP per Capita"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">original_plot</span> <span class="op">|</span> <span class="va">winsorized_plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="module-4.3_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Here we clearly see how winsorizing reduces the impact of extreme values. The histogram on the left shows the original distribution with its long right tail, while the winsorized histogram on the right caps those extreme values, making the distribution a bit more symmetric.</p>
</section><section id="robust-regression" class="level3"><h3 class="anchored" data-anchor-id="robust-regression">Robust Regression</h3>
<p>One last approach we will briefly explore is <strong>robust regression</strong>. This technique is designed to be less sensitive to outliers than ordinary least squares (OLS) regression. It uses different loss functions that reduce the influence of extreme values, making it a good choice when you have outliers that you do not want to remove or transform. We can perform robust regression using the <code><a href="https://rdrr.io/pkg/MASS/man/rlm.html">rlm()</a></code> function from the <code>MASS</code> package, which implements a robust version of linear regression.</p>
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Robust regression is less sensitive to outliers</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://www.stats.ox.ac.uk/pub/MASS4/">MASS</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">robust_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/MASS/man/rlm.html">rlm</a></span><span class="op">(</span><span class="va">lib_dem</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">wealth</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">model_data</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">robust_model</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call: rlm(formula = lib_dem ~ log(wealth), data = model_data)
Residuals:
     Min       1Q   Median       3Q      Max 
-0.60880 -0.15368  0.03422  0.17024  0.37024 

Coefficients:
            Value  Std. Error t value
(Intercept) 0.1178 0.0385     3.0619 
log(wealth) 0.1311 0.0149     8.8195 

Residual standard error: 0.2429 on 172 degrees of freedom</code></pre>
</div>
</div>
<p>Here we see that the coefficients and significance levels are similar to our original OLS model, but we can be more confident that the results are not overly influenced by the outliers we identified earlier.</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Your Turn!!
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Try removing the influential points in the polarization model that you created earlier.</li>
<li>Rerun the model with those influential points removed and compare the results to the original model.</li>
<li>How do the results change? Do you notice any differences in the coefficients or significance levels?</li>
<li>Now try winsorizing the polarization data at the 95th percentile and rerunning the model. How does this affect the results?</li>
<li>Finally, try running a robust regression on the polarization data. How do the results compare to the original model and the winsorized model?</li>
</ul>
</div>
</div>
</section></section><section id="making-the-right-choice" class="level2"><h2 class="anchored" data-anchor-id="making-the-right-choice">Making the Right Choice</h2>
<p>When dealing with outliers and influential observations, the most important step is to understand their nature and context. Outliers caused by data entry errors or coming from clearly different populations (like microstates in a global dataset) may justify removal. But many outliers are legitimate and may be the most substantively interesting cases in your data. In those situations, it’s often better to retain them and use transformations (like logging or Box-Cox) to reduce their influence, especially when the data are naturally skewed. Winsorizing offers a middle ground—keeping all observations while capping extreme values—particularly useful in predictive modeling or when you suspect noise in the extreme tails.</p>
<p>Whatever approach you take—removal, transformation, winsorizing, or none at all—it’s essential to report your decisions clearly and check how they affect your results. Describe how you identified outliers, explain your reasoning for handling them in a specific way, and conduct a brief sensitivity analysis to see if your main conclusions change. Outlier handling is not just a technical step; it’s a modeling decision that should be transparent and justifiable to your audience.</p>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/ds4all\.rocks");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>© Copyright 2025, <a href="https://emmanuel.teitelbaum.com">Emmanuel Teitelbaum</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/eteitelbaum/dats1001-summer/edit/main/modules/module-4.3.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/eteitelbaum/dats1001-summer/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This page is built with <a href="https://quarto.org/">Quarto</a>. 👷🛠️</p>
</div>
  </div>
</footer>


</body></html>