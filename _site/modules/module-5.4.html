<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Module 5.4 – DATS 1001–Fall Schedule</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/ds4all-logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-f428fda71a3abb5b1b9c21151da8fd61.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-6ec1ea2183979a90750e7180bf9040de.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-f428fda71a3abb5b1b9c21151da8fd61.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-8ba55214e2cf2b8151fd22e466944314.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-72ecc774e5eb6ee2146fcd9ff417b5a6.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../site_libs/bootstrap/bootstrap-8ba55214e2cf2b8151fd22e466944314.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>
<meta property="og:title" content="Module 5.4 – DATS 1001–Fall Schedule">
<meta property="og:description" content="Multiple Predictors and Interactions">
<meta property="og:site_name" content="DATS 1001--Fall Schedule">
<meta name="twitter:title" content="Module 5.4 – DATS 1001–Fall Schedule">
<meta name="twitter:description" content="Multiple Predictors and Interactions">
<meta name="twitter:card" content="summary">
</head>
<body class="nav-sidebar docked quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Module 5.4</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/ds4all-logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none"></a>
      <div class="sidebar-tools-main tools-wide">
    <a href="https://blackboard.gwu.edu" title="Blackboard" class="quarto-navigation-tool px-1" aria-label="Blackboard"><i class="bi bi-mortarboard-fill"></i></a>
    <a href="https://library.gwu.edu/work-data" title="Gelman Data Services" class="quarto-navigation-tool px-1" aria-label="Gelman Data Services"><i class="bi bi-bar-chart-fill"></i></a>
    <a href="https://posit.cloud" title="Access R and RStudio" class="quarto-navigation-tool px-1" aria-label="Access R and RStudio"><i class="bi bi-r-circle"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Course information</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-description.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Description</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-support.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Support</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../instructor.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Instructor</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schedule</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-links.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Useful links</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../faq.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FAQ</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Coding Asignments</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/coding-assignment-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/coding-assignment-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/coding-assignment-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/coding-assignment-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 4</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Project</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/project-assignment-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/project-assignment-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/project-assignment-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/project-datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Datasets</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">Weekly materials</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 4</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#models-with-multiple-predictors" id="toc-models-with-multiple-predictors" class="nav-link" data-scroll-target="#models-with-multiple-predictors">Models with Multiple Predictors</a></li>
  <li><a href="#why-interaction-effects-matter-in-conflict-research" id="toc-why-interaction-effects-matter-in-conflict-research" class="nav-link" data-scroll-target="#why-interaction-effects-matter-in-conflict-research">Why Interaction Effects Matter in Conflict Research</a></li>
  <li><a href="#interaction-effect-1-democracy-and-mountainous-terrain" id="toc-interaction-effect-1-democracy-and-mountainous-terrain" class="nav-link" data-scroll-target="#interaction-effect-1-democracy-and-mountainous-terrain">Interaction Effect #1: Democracy and Mountainous Terrain</a></li>
  <li><a href="#interaction-effect-2-democracy-and-economic-development" id="toc-interaction-effect-2-democracy-and-economic-development" class="nav-link" data-scroll-target="#interaction-effect-2-democracy-and-economic-development">Interaction Effect #2: Democracy and Economic Development</a></li>
  <li><a href="#model-comparison-and-selection-considerations" id="toc-model-comparison-and-selection-considerations" class="nav-link" data-scroll-target="#model-comparison-and-selection-considerations">Model Comparison and Selection Considerations</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/eteitelbaum/dats1001-summer/edit/main/modules/module-5.4.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/eteitelbaum/dats1001-summer/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Module 5.4</h1>
<p class="subtitle lead">Multiple Predictors and Interactions</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="overview" class="level2"><h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>Building on our bivariate interpretation skills, this module extends logistic regression to realistic research scenarios involving multiple predictors and interaction effects. Real-world research rarely involves simple bivariate relationships. Instead, we need to control for multiple confounding variables and often discover that the effect of one variable depends on the level of another variable.</p>
<p>In this module, we will explore how controlling for additional variables changes our interpretation of individual predictors, understand when and why to include interaction terms in our models, learn to interpret complex conditional relationships step-by-step, and master both manual calculation and automated tools for understanding interactions. We will also discover how to visualize complex relationships using predicted probabilities and recognize when continuous versus dichotomous measures affect our analytical conclusions.</p>
<p>By the end of this module, you’ll understand how multiple predictors work together in logistic regression, be able to interpret interaction effects manually and using specialized R tools, know how to visualize complex conditional relationships, and recognize the theoretical and practical considerations that guide interaction modeling decisions.</p>
</section><section id="models-with-multiple-predictors" class="level2"><h2 class="anchored" data-anchor-id="models-with-multiple-predictors">Models with Multiple Predictors</h2>
<p>In our previous modules, we focused on bivariate relationships to build solid interpretive foundations. However, real research requires us to control for multiple potential confounding variables simultaneously. One of the most influential examples of multiple predictor logistic regression in political science comes from Fearon and Laitin’s <span class="citation" data-cites="fearon2003">(<a href="#ref-fearon2003" role="doc-biblioref">2003</a>)</span> groundbreaking study of civil war onset.</p>
<p>Fearon and Laitin argued that civil wars are not primarily caused by ethnic or religious grievances, but rather by conditions that favor insurgency: weak state capacity, difficult terrain, and economic underdevelopment. Their comprehensive model included multiple predictors to control for alternative explanations while testing their core theoretical arguments.</p>
<p>Here we will loosely replicate their approach using the <code>peacesciencer</code> package and examine how our interpretation changes when we move from bivariate to multiple predictor models. First we will use the <code>peacesciencer</code> package to create a dataset similar to Fearon and Laitin’s. Notice how you can add multiple predictors using the <code>add_*</code> functions, which automatically handle data cleaning and merging. Notice also that we are creating a dichotomous democracy measure (<code>democracy</code>) based on the continuous V-Dem <code>v2x_polyarchy</code> score, which we will use in our interaction models later.</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/svmiller/peacesciencer/">peacesciencer</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Recreate the conflict dataset, adding a dichotomous democracy measure</span></span>
<span><span class="va">conflict_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/peacesciencer/man/create_stateyears.html">create_stateyears</a></span><span class="op">(</span>system <span class="op">=</span> <span class="st">'gw'</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1946</span><span class="op">:</span><span class="fl">1999</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/peacesciencer/man/add_ucdp_acd.html">add_ucdp_acd</a></span><span class="op">(</span>type<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"intrastate"</span><span class="op">)</span>, only_wars <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/peacesciencer/man/add_democracy.html">add_democracy</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/peacesciencer/man/add_creg_fractionalization.html">add_creg_fractionalization</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/peacesciencer/man/add_sdp_gdp.html">add_sdp_gdp</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/peacesciencer/man/add_rugged_terrain.html">add_rugged_terrain</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>democracy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">v2x_polyarchy</span> <span class="op">&gt;</span> <span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># binary democracy measure</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">ucdpongoing</span>, <span class="op">-</span><span class="va">maxintensity</span>, <span class="op">-</span><span class="va">conflict_ids</span>, <span class="op">-</span><span class="va">sdpest</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># need to drop NAs for logistic regression</span></span>
<span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">conflict_df</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 6,091
Columns: 17
$ gwcode         &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2…
$ statename      &lt;chr&gt; "United States of America", "United States of America",…
$ year           &lt;dbl&gt; 1946, 1947, 1948, 1949, 1950, 1951, 1952, 1953, 1954, 1…
$ ucdponset      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ v2x_polyarchy  &lt;dbl&gt; 0.605, 0.587, 0.599, 0.599, 0.587, 0.602, 0.601, 0.594,…
$ polity2        &lt;dbl&gt; 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,…
$ xm_qudsest     &lt;dbl&gt; 1.259180, 1.259180, 1.252190, 1.252190, 1.270106, 1.259…
$ ethfrac        &lt;dbl&gt; 0.2226323, 0.2248701, 0.2271561, 0.2294918, 0.2318781, …
$ ethpol         &lt;dbl&gt; 0.4152487, 0.4186156, 0.4220368, 0.4255134, 0.4290458, …
$ relfrac        &lt;dbl&gt; 0.4980802, 0.5009111, 0.5037278, 0.5065309, 0.5093204, …
$ relpol         &lt;dbl&gt; 0.7769888, 0.7770017, 0.7770303, 0.7770729, 0.7771274, …
$ wbgdp2011est   &lt;dbl&gt; 28.539, 28.519, 28.545, 28.534, 28.572, 28.635, 28.669,…
$ wbpopest       &lt;dbl&gt; 18.744, 18.756, 18.781, 18.804, 18.821, 18.832, 18.848,…
$ wbgdppc2011est &lt;dbl&gt; 9.794, 9.762, 9.764, 9.730, 9.752, 9.803, 9.821, 9.857,…
$ rugged         &lt;dbl&gt; 1.073, 1.073, 1.073, 1.073, 1.073, 1.073, 1.073, 1.073,…
$ newlmtnest     &lt;dbl&gt; 3.214868, 3.214868, 3.214868, 3.214868, 3.214868, 3.214…
$ democracy      &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…</code></pre>
</div>
</div>
<p>Let’s now start out with a baseline model that includes multiple predictors. This model will allow us to see how controlling for other factors changes our interpretation of the relationship between democracy and conflict onset.</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Fit the multiple predictor baseline model</span></span>
<span><span class="va">baseline_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">ucdponset</span> <span class="op">~</span> <span class="va">v2x_polyarchy</span> <span class="op">+</span> <span class="va">newlmtnest</span> <span class="op">+</span> <span class="va">wbpopest</span> <span class="op">+</span> </span>
<span>                     <span class="va">wbgdppc2011est</span> <span class="op">+</span> <span class="va">ethfrac</span> <span class="op">+</span> <span class="va">relfrac</span>,</span>
<span>                     data <span class="op">=</span> <span class="va">conflict_df</span>,</span>
<span>                     family <span class="op">=</span> <span class="st">"binomial"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the model summary</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">baseline_model</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = ucdponset ~ v2x_polyarchy + newlmtnest + wbpopest + 
    wbgdppc2011est + ethfrac + relfrac, family = "binomial", 
    data = conflict_df)

Coefficients:
               Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)    -5.53894    1.38149  -4.009 6.09e-05 ***
v2x_polyarchy  -0.54129    0.51336  -1.054 0.291690    
newlmtnest      0.12696    0.07256   1.750 0.080166 .  
wbpopest        0.26463    0.07029   3.765 0.000167 ***
wbgdppc2011est -0.36465    0.12180  -2.994 0.002755 ** 
ethfrac         0.81768    0.38874   2.103 0.035427 *  
relfrac        -0.37589    0.41629  -0.903 0.366543    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1172.3  on 6090  degrees of freedom
Residual deviance: 1113.6  on 6084  degrees of freedom
AIC: 1127.6

Number of Fisher Scoring iterations: 7</code></pre>
</div>
</div>
<p>This baseline model reveals several important patterns. First, notice how some variables that might have been significant in bivariate models may lose significance when we control for other factors. This is a classic result in multiple regression: apparent relationships can disappear when we account for confounding variables.</p>
<p>The model tells us that population size (<code>wbpopest</code>) and GDP per capita (<code>wbgdppc2011est</code>) remain significant predictors even after controlling for other factors. Ethnic fractionalization (<code>ethfrac</code>) shows some evidence of increasing conflict risk, while the continuous democracy measure (<code>v2x_polyarchy</code>) is not statistically significant in this specification.</p>
<p>The key insight for interpretation is that each coefficient now represents the effect of that variable <em>holding all other variables constant</em>. When we say that the coefficient for GDP per capita is -0.365, we mean that a one-unit increase in log GDP per capita decreases the log-odds of conflict onset by 0.365 (or about 31% when we exponentiate the coefficient) controlling for democracy levels, terrain, population, ethnic fractionalization, and religious fractionalization*.</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Your Turn!
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <code>peacesciencer</code> package provides multiple different measures of democracy, terrain and ethnic and religious divisions. Try running the baseline model using different combinations of these variables. How do the coefficients and significance levels change? What does this tell you about the importance of controlling for confounding variables in regression analysis?</p>
</div>
</div>
</section><section id="why-interaction-effects-matter-in-conflict-research" class="level2"><h2 class="anchored" data-anchor-id="why-interaction-effects-matter-in-conflict-research">Why Interaction Effects Matter in Conflict Research</h2>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/eb5lGVHHlY0?si=BCQJhZHezE9ihLg3" title="Effect Multipliers in Logistic Regression" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<p>The baseline model assumes that the effect of each predictor is the same regardless of the values of other predictors. This is called an <strong>additive model</strong> because the effects simply add up. But what if the effect of one variable depends on the level of another variable? What if mountainous terrain only increases conflict risk in non-democratic countries? What if economic development has a stronger peace-promoting effect in democratic societies?</p>
<p>These are questions about <strong>interaction effects</strong>, where the impact of one variable is <strong>conditional</strong> on the value of another variable. In conflict research, there are compelling theoretical reasons to expect such interactions. Democracy might provide institutional mechanisms for resolving grievances that would otherwise lead to violence. Democratic institutions might also change how other risk factors operate.</p>
<p>Consider two theoretical scenarios:</p>
<p><strong>Democracy and Terrain</strong>: In non-democratic countries, mountainous terrain might facilitate insurgency because remote populations have no voice in government and rebels can hide in difficult terrain. In democratic countries, these same remote populations might have political representation and peaceful means of addressing grievances, reducing the conflict-promoting effect of terrain.</p>
<p><strong>Democracy and Economic Development</strong>: Economic growth might reduce conflict risk in all countries, but this effect might be amplified in democracies where the benefits of growth are more widely shared and people have more say about how their tax dollars are spent.</p>
<p>Testing these theoretical expectations requires interaction terms in our logistic regression models. An interaction term allows the effect of one variable to vary depending on the level of another variable.</p>
</section><section id="interaction-effect-1-democracy-and-mountainous-terrain" class="level2"><h2 class="anchored" data-anchor-id="interaction-effect-1-democracy-and-mountainous-terrain">Interaction Effect #1: Democracy and Mountainous Terrain</h2>
<p>Let’s start with the democracy-terrain interaction using our dichotomous democracy measure. This provides an excellent opportunity to understand interaction effects through manual calculation before moving to more complex tools.</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Fit model with democracy-terrain interaction</span></span>
<span><span class="va">terrain_interaction_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">ucdponset</span> <span class="op">~</span> <span class="va">democracy</span> <span class="op">*</span> <span class="va">newlmtnest</span> <span class="op">+</span> <span class="va">wbpopest</span> <span class="op">+</span> </span>
<span>                                <span class="va">wbgdppc2011est</span> <span class="op">+</span> <span class="va">ethfrac</span> <span class="op">+</span> <span class="va">relfrac</span>,</span>
<span>                                data <span class="op">=</span> <span class="va">conflict_df</span>,</span>
<span>                                family <span class="op">=</span> <span class="st">"binomial"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the model summary</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">terrain_interaction_model</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = ucdponset ~ democracy * newlmtnest + wbpopest + 
    wbgdppc2011est + ethfrac + relfrac, family = "binomial", 
    data = conflict_df)

Coefficients:
                     Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)          -6.31995    1.40870  -4.486 7.24e-06 ***
democracy             0.19601    0.48195   0.407 0.684224    
newlmtnest            0.18651    0.07909   2.358 0.018355 *  
wbpopest              0.26762    0.07068   3.786 0.000153 ***
wbgdppc2011est       -0.29958    0.11970  -2.503 0.012324 *  
ethfrac               0.78512    0.38998   2.013 0.044091 *  
relfrac              -0.33550    0.41231  -0.814 0.415809    
democracy:newlmtnest -0.41501    0.20300  -2.044 0.040914 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1172.3  on 6090  degrees of freedom
Residual deviance: 1106.5  on 6083  degrees of freedom
AIC: 1122.5

Number of Fisher Scoring iterations: 7</code></pre>
</div>
</div>
<p>The interaction term <code>democracy:newlmtnest</code> has a coefficient of -0.415 and is statistically significant (p = 0.041). But what does this mean substantively?</p>
<p>With a dichotomous interaction variable like our democracy measure, we can calculate the conditional effects manually. The model equation is:</p>
<p><span class="math display">\[\text{logit}(p) = \beta_0 + \beta_1(\text{democracy}) + \beta_2(\text{terrain}) + \beta_3(\text{democracy} \times \text{terrain}) + \text{other controls}\]</span></p>
<p>This gives us two different equations depending on the democracy level:</p>
<p><strong>For non-democratic countries</strong> (democracy = 0) the democracy coefficient gets zeroed out, the interaction term drops out and the model simplifies to:</p>
<p><span class="math display">\[\text{logit}(p) = \beta_0 + \beta_2(\text{terrain}) + \text{other controls}\]</span></p>
<p>In other words, the effect of terrain is simply the value of the terrain coefficient <span class="math inline">\(\beta_2 = 0.187\)</span>.</p>
<p><strong>For democratic countries</strong> (democracy = 1) we include the democracy coefficient and the interaction term (1 + terrain):</p>
<p><span class="math display">\[\text{logit}(p) = \beta_0 + \beta_1(1) + \beta_2(\text{terrain}) + \beta_3(\text{democracy} \times \text{terrain}) + \text{other controls}\]</span> This simplifies to:</p>
<p><span class="math display">\[\text{logit}(p) = \beta_0 + \beta_1 + (\beta_2 + \beta_3)(\text{terrain}) + \text{other controls}\]</span></p>
<p>So then the marginal effect of terrain is <span class="math inline">\(\beta_2 + \beta_3 = 0.187 + (-0.415) = -0.228\)</span>.</p>
<p>Here is how it would look if we did that with R code.</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://marginaleffects.com/">marginaleffects</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://broom.tidymodels.org/">broom</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">conditional_effects_terrain</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://marginaleffects.com/man/r/slopes.html">slopes</a></span><span class="op">(</span><span class="va">terrain_interaction_model</span>, </span>
<span>                                      variables <span class="op">=</span> <span class="st">"newlmtnest"</span>,</span>
<span>                                      by <span class="op">=</span> <span class="st">"democracy"</span>,</span>
<span>                                      type <span class="op">=</span> <span class="st">"link"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># convert to tidy format</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>odds.ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="va">estimate</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># add column with odds ratios</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span></span>
<span>    <span class="va">term</span><span class="op">:</span><span class="va">std.error</span>, </span>
<span>    <span class="va">conf.low</span><span class="op">:</span><span class="va">odds.ratio</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">conditional_effects_terrain</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 7
  term       democracy estimate std.error conf.low conf.high odds.ratio
  &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
1 newlmtnest         0    0.187    0.0791   0.0315     0.342      1.21 
2 newlmtnest         1   -0.228    0.189   -0.599      0.142      0.796</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Understanding the Code
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <code><a href="https://marginaleffects.com/man/r/slopes.html">slopes()</a></code> function in marginaleffects can calculate marginal effects on different scales. By default, it uses <code>type = "response"</code>, which gives us marginal effects on the probability scale that show how much the probability of conflict changes per unit increase in terrain. These effects are typically very small because probabilities are constrained between 0 and 1.</p>
<p>When we specify <code>type = "link"</code>, we get marginal effects on the log-odds scale instead. This matches the scale of our model coefficients and our manual calculations above. Using type = “link” is particularly helpful for understanding interactions because it directly corresponds to the coefficients we see in our model summary, making it easier to connect the automated results to the underlying mathematical relationships.</p>
<p>After we run the <code><a href="https://marginaleffects.com/man/r/slopes.html">slopes()</a></code> function, we use <code><a href="https://generics.r-lib.org/reference/tidy.html">tidy()</a></code> to convert the results into a tidy format that is easier to read and manipulate. We then calculate the odds ratios by exponentiating the estimates, which allows us to interpret the effects in terms of odds rather than log-odds. Then we select only the relevant columns for clarity.</p>
</div>
</div>
<p>These results reveal a fascinating pattern! In non-democratic countries, mountainous terrain increases the odds of conflict onset by about 21% for each unit increase in terrain roughness (odds ratio = 1.206). However, in democratic countries, mountainous terrain actually decreases the odds of conflict onset by about 20% for each unit increase (odds ratio = 0.796).</p>
<p>This interaction suggests that democracy fundamentally changes how terrain affects conflict risk. In authoritarian systems, difficult terrain may indeed facilitate insurgency by providing rebels with safe havens and making government control difficult. In democratic systems, perhaps the same geographical isolation is less problematic because remote populations have political voice and peaceful means of addressing grievances.</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Your Turn!
</div>
</div>
<div class="callout-body-container callout-body">
<p>Now practice interpreting interaction effects by examining the democracy main effect:</p>
<ol type="1">
<li>Calculate the effect of democracy when terrain = 0 using the model coefficients</li>
<li>Calculate the effect of democracy when terrain = 1 (one standard deviation above mean)</li>
<li>Convert both to odds ratios and interpret the results</li>
<li>What does this tell us about when democracy has stronger or weaker effects on conflict risk?</li>
</ol>
<p>Remember: the interaction works both ways! If terrain’s effect depends on democracy, then democracy’s effect also depends on terrain.</p>
</div>
</div>
</section><section id="interaction-effect-2-democracy-and-economic-development" class="level2"><h2 class="anchored" data-anchor-id="interaction-effect-2-democracy-and-economic-development">Interaction Effect #2: Democracy and Economic Development</h2>
<p>Our second interaction examines how democracy moderates the relationship between economic development and conflict risk. For this analysis, we’ll use the continuous democracy measure (<code>v2x_polyarchy</code>) to illustrate why we need more sophisticated tools when dealing with continuous interaction variables.</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Fit model with continuous democracy-wealth interaction</span></span>
<span><span class="va">wealth_interaction_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">ucdponset</span> <span class="op">~</span> <span class="va">v2x_polyarchy</span> <span class="op">*</span> <span class="va">wbgdppc2011est</span> <span class="op">+</span> <span class="va">newlmtnest</span> <span class="op">+</span> </span>
<span>                               <span class="va">wbpopest</span> <span class="op">+</span> <span class="va">ethfrac</span> <span class="op">+</span> <span class="va">relfrac</span>,</span>
<span>                               data <span class="op">=</span> <span class="va">conflict_df</span>,</span>
<span>                               family <span class="op">=</span> <span class="st">"binomial"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the model summary</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">wealth_interaction_model</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = ucdponset ~ v2x_polyarchy * wbgdppc2011est + newlmtnest + 
    wbpopest + ethfrac + relfrac, family = "binomial", data = conflict_df)

Coefficients:
                             Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                  -8.34699    1.77914  -4.692 2.71e-06 ***
v2x_polyarchy                 9.39357    4.04517   2.322 0.020224 *  
wbgdppc2011est               -0.05136    0.17087  -0.301 0.763742    
newlmtnest                    0.15972    0.07470   2.138 0.032496 *  
wbpopest                      0.26812    0.06999   3.831 0.000128 ***
ethfrac                       0.75002    0.38459   1.950 0.051155 .  
relfrac                      -0.24191    0.41891  -0.577 0.563613    
v2x_polyarchy:wbgdppc2011est -1.13001    0.46270  -2.442 0.014598 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1172.3  on 6090  degrees of freedom
Residual deviance: 1107.3  on 6083  degrees of freedom
AIC: 1123.3

Number of Fisher Scoring iterations: 8</code></pre>
</div>
</div>
<p>The interaction term <code>v2x_polyarchy:wbgdppc2011est</code> has a coefficient of -1.130 and is statistically significant (p = 0.015). This negative coefficient suggests that democracy amplifies the conflict-reducing effect of economic development. But with a continuous moderator variable, we can’t simply calculate “democracy = 0” and “democracy = 1” effects as we did before.</p>
<p>This is where the <code>marginaleffects</code> package becomes invaluable. We can specify <code>at = list()</code> to calculate the conditional effect of economic development at different levels of democracy, taking into account the continuous nature of our democracy measure:</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">conditional_effects_wealth</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://marginaleffects.com/man/r/slopes.html">slopes</a></span><span class="op">(</span><span class="va">wealth_interaction_model</span>, </span>
<span>                       variables <span class="op">=</span> <span class="st">"wbgdppc2011est"</span>,</span>
<span>                       newdata <span class="op">=</span> <span class="fu"><a href="https://marginaleffects.com/man/r/datagrid.html">datagrid</a></span><span class="op">(</span>v2x_polyarchy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.3</span>, <span class="fl">0.5</span>, <span class="fl">0.7</span>, <span class="fl">0.9</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                       type <span class="op">=</span> <span class="st">"link"</span><span class="op">)</span> <span class="op">|&gt;</span>  </span>
<span>  <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>odds.ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="va">estimate</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">v2x_polyarchy</span>, <span class="va">estimate</span>, <span class="va">std.error</span>, <span class="va">conf.low</span>, <span class="va">conf.high</span>, <span class="va">odds.ratio</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">conditional_effects_wealth</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
  v2x_polyarchy estimate std.error conf.low conf.high odds.ratio
          &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
1           0.1   -0.164     0.141   -0.440     0.112      0.848
2           0.3   -0.390     0.117   -0.620    -0.161      0.677
3           0.5   -0.616     0.157   -0.925    -0.308      0.540
4           0.7   -0.842     0.230   -1.29     -0.391      0.431
5           0.9   -1.07      0.314   -1.68     -0.454      0.344</code></pre>
</div>
</div>
<p>These results reveal how democracy progressively amplifies the peace-promoting effects of economic development. In highly authoritarian countries (polyarchy = 0.1), economic development has a modest negative effect on conflict risk. As democracy levels increase, this peace-promoting effect becomes much stronger. In highly democratic countries (polyarchy = 0.9), the conflict-reducing effect of economic development is substantially amplified.</p>
<p>The theoretical interpretation is compelling: economic development may reduce conflict risk in all political systems, but democratic institutions help ensure that the benefits of growth are more widely shared and that economic grievances can be addressed through peaceful political processes rather than violence.</p>
</section><section id="model-comparison-and-selection-considerations" class="level2"><h2 class="anchored" data-anchor-id="model-comparison-and-selection-considerations">Model Comparison and Selection Considerations</h2>
<p>When should we include interaction terms in our models? This decision should be guided by both theoretical considerations and empirical evidence. Interactions should be theoretically motivated rather than the result of fishing expeditions through possible variable combinations.</p>
<p>In our conflict example, both interactions have strong theoretical foundations. The democracy-terrain interaction tests whether democratic institutions provide alternative channels for addressing grievances that might otherwise lead to insurgency in remote areas. The democracy-wealth interaction examines whether democratic institutions help translate economic development into political stability more effectively than authoritarian institutions.</p>
<p>Let’s compare our models to see how interactions affect overall model fit:</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Compare model fit using AIC</span></span>
<span><span class="va">models_comparison</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  Model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Baseline"</span>, <span class="st">"Democracy × Terrain"</span>, <span class="st">"Democracy × Wealth"</span><span class="op">)</span>,</span>
<span>  AIC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/AIC.html">AIC</a></span><span class="op">(</span><span class="va">baseline_model</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/AIC.html">AIC</a></span><span class="op">(</span><span class="va">terrain_interaction_model</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/AIC.html">AIC</a></span><span class="op">(</span><span class="va">wealth_interaction_model</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  Deviance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/deviance.html">deviance</a></span><span class="op">(</span><span class="va">baseline_model</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/deviance.html">deviance</a></span><span class="op">(</span><span class="va">terrain_interaction_model</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/deviance.html">deviance</a></span><span class="op">(</span><span class="va">wealth_interaction_model</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">models_comparison</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                Model      AIC Deviance
1            Baseline 1127.636 1113.636
2 Democracy × Terrain 1122.476 1106.476
3  Democracy × Wealth 1123.313 1107.313</code></pre>
</div>
</div>
<p>Both models reduce the AIC compared to the baseline model. We can confirm this using likelihood ratio tests, which compare nested models to see if the additional parameters significantly improve fit:</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Test significance of interaction terms using likelihood ratio tests</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">lmtest</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Test terrain interaction</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/lmtest/man/lrtest.html">lrtest</a></span><span class="op">(</span><span class="va">baseline_model</span>, <span class="va">terrain_interaction_model</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Likelihood ratio test

Model 1: ucdponset ~ v2x_polyarchy + newlmtnest + wbpopest + wbgdppc2011est + 
    ethfrac + relfrac
Model 2: ucdponset ~ democracy * newlmtnest + wbpopest + wbgdppc2011est + 
    ethfrac + relfrac
  #Df  LogLik Df  Chisq Pr(&gt;Chisq)   
1   7 -556.82                        
2   8 -553.24  1 7.1604   0.007453 **
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># For wealth interaction, need to adjust baseline model for fair comparison</span></span>
<span><span class="va">baseline_continuous</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">ucdponset</span> <span class="op">~</span> <span class="va">v2x_polyarchy</span> <span class="op">+</span> <span class="va">newlmtnest</span> <span class="op">+</span> <span class="va">wbpopest</span> <span class="op">+</span> </span>
<span>                          <span class="va">wbgdppc2011est</span> <span class="op">+</span> <span class="va">ethfrac</span> <span class="op">+</span> <span class="va">relfrac</span>,</span>
<span>                          data <span class="op">=</span> <span class="va">conflict_df</span>, family <span class="op">=</span> <span class="st">"binomial"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/lmtest/man/lrtest.html">lrtest</a></span><span class="op">(</span><span class="va">baseline_continuous</span>, <span class="va">wealth_interaction_model</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Likelihood ratio test

Model 1: ucdponset ~ v2x_polyarchy + newlmtnest + wbpopest + wbgdppc2011est + 
    ethfrac + relfrac
Model 2: ucdponset ~ v2x_polyarchy * wbgdppc2011est + newlmtnest + wbpopest + 
    ethfrac + relfrac
  #Df  LogLik Df  Chisq Pr(&gt;Chisq)  
1   7 -556.82                       
2   8 -553.66  1 6.3229    0.01192 *
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>The way we read this results is that if the p-value is less than 0.05, then we can conclude that the interaction term significantly improves model fit compared to the baseline model. If the p-value is greater than 0.05, then we cannot conclude that the interaction term significantly improves model fit.</p>
<p>Based on these tests, we can conclude that both interaction terms significantly improve model fit. However, remember that model fit alone should not drive interaction decisions. The theoretical motivation for expecting conditional effects should be the primary consideration.</p>
</section><section id="summary" class="level2"><h2 class="anchored" data-anchor-id="summary">Summary</h2>
<p>This module has equipped you with essential skills for handling realistic logistic regression analyses involving multiple predictors and interaction effects. We discovered how moving from bivariate to multiple predictor models changes coefficient interpretation by controlling for confounding variables. We learned to identify when interaction effects are theoretically justified and how they allow the effect of one variable to depend on another. We mastered both manual calculation techniques for simple interactions and automated tools for complex conditional relationships. Most importantly, we developed skills in visualizing and communicating complex interaction patterns to diverse audiences.</p>
<p>The Fearon-Laitin replication demonstrated how democracy can fundamentally alter the relationships between other variables and conflict risk. Mountainous terrain appears to promote conflict only in non-democratic settings, while economic development has stronger peace-promoting effects in democratic contexts. These findings illustrate why interaction effects are crucial for understanding real-world political phenomena.</p>
<p>Our progression from manual calculation with dichotomous variables to automated tools with continuous variables provides a solid foundation for tackling any interaction scenario. The visualization techniques we learned help communicate complex statistical relationships to policy audiences who need to understand not just whether interactions exist, but what they mean in practice.</p>



</section><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-fearon2003" class="csl-entry" role="listitem">
Fearon, James D., and David D. Laitin. 2003. <span>“Ethnicity, Insurgency, and Civil War.”</span> <em>American Political Science Review</em> 97 (1): 75–90. <a href="https://doi.org/10.1017/S0003055403000534">https://doi.org/10.1017/S0003055403000534</a>.
</div>
</div></section></div></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/ds4all\.rocks");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>© Copyright 2025, <a href="https://emmanuel.teitelbaum.com">Emmanuel Teitelbaum</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/eteitelbaum/dats1001-summer/edit/main/modules/module-5.4.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/eteitelbaum/dats1001-summer/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This page is built with <a href="https://quarto.org/">Quarto</a>. 👷🛠️</p>
</div>
  </div>
</footer>


</body></html>