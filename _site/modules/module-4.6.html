<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Module 4.6 – DATS 1001–Fall Schedule</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/ds4all-logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-f428fda71a3abb5b1b9c21151da8fd61.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-6ec1ea2183979a90750e7180bf9040de.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-f428fda71a3abb5b1b9c21151da8fd61.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-8ba55214e2cf2b8151fd22e466944314.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-72ecc774e5eb6ee2146fcd9ff417b5a6.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../site_libs/bootstrap/bootstrap-8ba55214e2cf2b8151fd22e466944314.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link href="../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="../site_libs/plotly-binding-4.10.4/plotly.js"></script><script src="../site_libs/typedarray-0.1/typedarray.min.js"></script><script src="../site_libs/jquery-3.5.1/jquery.min.js"></script><link href="../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script><link href="../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<meta property="og:title" content="Module 4.6 – DATS 1001–Fall Schedule">
<meta property="og:description" content="Checking Model Assumptions">
<meta property="og:image" content="https://ds4all.rocks/modules/module-4.6_files/figure-html/ggpairs-eda-1.png">
<meta property="og:site_name" content="DATS 1001--Fall Schedule">
<meta property="og:image:height" content="960">
<meta property="og:image:width" content="1344">
<meta name="twitter:title" content="Module 4.6 – DATS 1001–Fall Schedule">
<meta name="twitter:description" content="Checking Model Assumptions">
<meta name="twitter:image" content="https://ds4all.rocks/modules/module-4.6_files/figure-html/ggpairs-eda-1.png">
<meta name="twitter:image-height" content="960">
<meta name="twitter:image-width" content="1344">
<meta name="twitter:card" content="summary_large_image">
</head>
<body class="nav-sidebar docked quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Module 4.6</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/ds4all-logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none"></a>
      <div class="sidebar-tools-main tools-wide">
    <a href="https://blackboard.gwu.edu" title="Blackboard" class="quarto-navigation-tool px-1" aria-label="Blackboard"><i class="bi bi-mortarboard-fill"></i></a>
    <a href="https://library.gwu.edu/work-data" title="Gelman Data Services" class="quarto-navigation-tool px-1" aria-label="Gelman Data Services"><i class="bi bi-bar-chart-fill"></i></a>
    <a href="https://posit.cloud" title="Access R and RStudio" class="quarto-navigation-tool px-1" aria-label="Access R and RStudio"><i class="bi bi-r-circle"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Course information</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-description.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Description</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-support.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Support</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../instructor.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Instructor</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schedule</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-links.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Useful links</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../faq.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FAQ</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Coding Asignments</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/coding-assignment-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/coding-assignment-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/coding-assignment-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/coding-assignment-4.qmd" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 4</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Project</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/project-assignment-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/project-assignment-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/project-assignment-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/project-datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Datasets</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">Weekly materials</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 4</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Module 4.6</h1>
<p class="subtitle lead">Checking Model Assumptions</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prework
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Install the <code>performance</code> package: <code>install.packages("performance")</code> and read the <a href="https://easystats.github.io/performance/">documentation</a>
</li>
<li>Install the <code>GGally</code> package: <code>install.packages("GGally")</code> and read the <a href="https://ggobi.github.io/ggally/index.html">documentation</a>
</li>
<li>Run the following code to get set up for this module:</li>
</ul>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://creativecommons.org/licenses/by-sa/4.0/">vdemlite</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load V-Dem data for 2019</span></span>
<span><span class="va">model_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://eteitelbaum.github.io/vdemlite/reference/fetchdem.html">fetchdem</a></span><span class="op">(</span></span>
<span>  indicators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"v2x_libdem"</span>, </span>
<span>  <span class="st">"e_gdppc"</span>, </span>
<span>  <span class="st">"v2cacamps"</span>,</span>
<span>  <span class="st">"v2x_gender"</span>,</span>
<span>  <span class="st">"v2x_corr"</span>,</span>
<span>  <span class="st">"e_regionpol_6C"</span><span class="op">)</span>,</span>
<span>  start_year <span class="op">=</span> <span class="fl">2006</span>, </span>
<span>  end_year <span class="op">=</span> <span class="fl">2006</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span></span>
<span>    country <span class="op">=</span> <span class="va">country_name</span>, </span>
<span>    lib_dem <span class="op">=</span> <span class="va">v2x_libdem</span>, </span>
<span>    wealth <span class="op">=</span> <span class="va">e_gdppc</span>,</span>
<span>    polarization <span class="op">=</span> <span class="va">v2cacamps</span>,</span>
<span>    women_empowerment <span class="op">=</span> <span class="va">v2x_gender</span>,</span>
<span>    corruption <span class="op">=</span> <span class="va">v2x_corr</span>,</span>
<span>    region <span class="op">=</span> <span class="va">e_regionpol_6C</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span></span>
<span>    <span class="va">region</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"Eastern Europe"</span>, </span>
<span>      <span class="st">"Latin America"</span>, </span>
<span>      <span class="st">"MENA"</span>, </span>
<span>      <span class="st">"SS Africa"</span>, </span>
<span>      <span class="st">"The West"</span>, </span>
<span>      <span class="st">"Asia &amp; Pacific"</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span> </span>
<span></span>
<span><span class="co">#glimpse(model_data)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="overview" class="level2"><h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>You’ve learned to fit linear regression models, interpret coefficients, handle outliers, and select variables. But how do you know if your model is actually valid? Linear regression makes several important assumptions, and violating these can lead to misleading results, incorrect inferences, and poor predictions.</p>
<p>The key insight is that we should examine our data before fitting models and then validate our assumptions after fitting them. This two-stage approach—exploratory data analysis (EDA) followed by residual diagnostics—helps ensure our models are both appropriate and reliable. Think of EDA as reconnaissance before battle and residual diagnostics as quality control after production.</p>
<p>In this module, we’ll explore comprehensive EDA techniques using the <code>performance</code> and <code>GGally</code> packages, then learn to check the four key assumptions underlying linear regression. These assumptions are often remembered by the acronym LINE, which we’ll explore in detail. We’ll continue using the democracy and development data from previous modules to illustrate these diagnostic techniques and remedial strategies.</p>
<p>By the end of this module, you’ll understand how to conduct thorough exploratory data analysis to spot potential modeling issues before they become problems. You’ll master the four key assumptions of linear regression and know how to check them systematically. Most importantly, you’ll develop the judgment to know when assumption violations are serious enough to require action and when they can be acknowledged but not necessarily fixed.</p>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/iMdtTCX2Q70?si=5qhftnJZ0jYRhmdB" title="Checking Model Assumptions with Residual Plots" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
</section><section id="exploratory-data-analysis-eda" class="level2"><h2 class="anchored" data-anchor-id="exploratory-data-analysis-eda">Exploratory Data Analysis (EDA)</h2>
<p>Before fitting any regression model, we should thoroughly explore our data. This exploratory phase can reveal potential problems and guide our modeling strategy. The <code>GGally</code> package provides powerful tools for comprehensive <strong>exploratory data analysis (EDA)</strong> that integrate seamlessly with our tidyverse workflow, allowing us to examine multiple relationships simultaneously rather than creating dozens of individual plots.</p>
<p>The <code><a href="https://ggobi.github.io/ggally/reference/ggpairs.html">ggpairs()</a></code> function creates a matrix of plots showing relationships between all pairs of variables. This gives us a comprehensive overview in a single visualization, something that would otherwise require creating many individual plots. The beauty of this approach is that it reveals patterns we might miss when examining variables one at a time.</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggobi.github.io/ggally/">GGally</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">model_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">lib_dem</span><span class="op">:</span><span class="va">corruption</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggobi.github.io/ggally/reference/ggpairs.html">ggpairs</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="module-4.6_files/figure-html/ggpairs-eda-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="understanding-the-code" class="level2 {callout-important}"><h2 class="anchored" data-anchor-id="understanding-the-code">Understanding the Code</h2>
<p><code><a href="https://ggobi.github.io/ggally/reference/ggpairs.html">ggpairs()</a></code> fits right into our Tidyverse workflow. Here we are selecting the continuous variables we want to examine from our <code>model_data</code> (dataset, which includes )<code>lib_dem</code>, <code>wealth</code>, <code>polarization</code>, <code>corruption</code>, and <code>region</code>) with the <code>:</code> operator and then piping those variables into <code><a href="https://ggobi.github.io/ggally/reference/ggpairs.html">ggpairs()</a></code>.</p>
</section><p>This single command creates a rich matrix of information. The diagonal shows the distribution of each variable, helping us assess whether variables are normally distributed, skewed, or have unusual patterns. The upper triangle displays correlation coefficients, giving us a quick sense of which variables are most strongly related. The lower triangle presents scatterplots showing the actual relationships between variables, where we can spot non-linear patterns, outliers, or changes in variance.</p>
<p>When examining the <code><a href="https://ggobi.github.io/ggally/reference/ggpairs.html">ggpairs()</a></code> output, we’re looking for several key patterns. <strong>Linearity</strong> is crucial since linear regression assumes straight-line relationships, so we watch for curves or bends in the scatterplots. <strong>Outliers</strong> appear as points far from the main pattern and can dramatically influence our regression results. <strong>Skewness</strong> in the diagonal plots might suggest the need for transformations. <strong>Heteroscedasticity</strong> refers to changing variance across the range of predictors, which often manifests as a funnel shape in scatterplots. Finally, strong correlations between predictors might signal <strong>multicollinearity</strong> problems we’ll need to address.</p>
<p>The correlation coefficients in the upper triangle deserve special attention. Values close to +1 or -1 indicate strong linear relationships, while values near 0 suggest weak relationships. As a rule of thumb, we are on the lookout for correlations that are stronger than 0.7 or weaker than -0.7, as these suggest potentially important relationships that we should explore further. Note, however, correlation coefficients can be misleading if relationships are non-linear, which is why we also examine the scatterplots below the diagonal.</p>
<section id="patterns-across-groups" class="level2"><h2 class="anchored" data-anchor-id="patterns-across-groups">Patterns Across Groups</h2>
<p>Remember ridge plots from earlier modules? They’re perfect for comparing distributions across groups, and they provide a elegant way to examine how our outcome variable varies across different categories. Let’s examine how women’s empowerment varies by region using this technique we learned in an earlier module.</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/ggridges/">ggridges</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">model_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">women_empowerment</span>, y <span class="op">=</span> <span class="va">region</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://wilkelab.org/ggridges/reference/geom_density_ridges.html">geom_density_ridges</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"steelblue"</span>, alpha <span class="op">=</span> <span class="fl">0.7</span>, scale <span class="op">=</span> <span class="fl">.9</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://wilkelab.org/ggridges/reference/theme_ridges.html">theme_ridges</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>, y <span class="op">=</span> <span class="st">""</span>,</span>
<span>       title <span class="op">=</span> <span class="st">"Distribution of Women's Empowerment Scores by Region"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="module-4.6_files/figure-html/ridge-plot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This plot reveals important patterns that will inform our modeling strategy. One thing that really jumps out is that the distributions are much more normally distributed at the regional level relative to the overall distribution that we saw in our earlier pairs plot (which was heavily left-skewed). But we also see very different distributions across regions. For example, Western Europe and North America show high women’s empowerment scores just above 0.9, creating a tight distribution that suggests consistency within this region. Whereas Asia shows lower scores concentrated around 0.6, indicating systematically different political systems and Sub-Saharan Africa displays a wide spread of scores, suggesting substantial variation within the region.</p>
<p>These regional patterns suggest that inculding <code>region</code> as a control variable in our models will be important. It also suggests that we might want to explore interactions between <code>region</code> and other predictors, such as <code>wealth</code>, to see if the relationships differ across regions.</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Your Turn!
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Looking at the <code><a href="https://ggobi.github.io/ggally/reference/ggpairs.html">ggpairs()</a></code> output, are there variables that show heavy skewness?</li>
<li>Are there any variables that appear to have non-linear relationships with <code>lib_dem</code>?</li>
<li>Do you notice any strong correlations between predictors that might suggest multicollinearity?</li>
<li>Are there any outliers that stand out in the scatterplots?</li>
<li>Try creating a ridge plot for some of the variables in the dataset, particularly ones with skewness and outliers. Do these patterns persist at the regional level? How does this influence your modeling decisions?<br>
</li>
</ul>
</div>
</div>
</section><section id="the-line-conditions-what-linear-regression-assumes" class="level2"><h2 class="anchored" data-anchor-id="the-line-conditions-what-linear-regression-assumes">The LINE Conditions: What Linear Regression Assumes</h2>
<p>Now that we’ve explored our data, let’s formalize the assumptions underlying linear regression. These assumptions aren’t arbitrary mathematical requirements but reflect important properties that make linear regression a sensible approach to modeling relationships. The assumptions are often remembered by the acronym <strong>LINE</strong>: Linearity, Independence, Normality, and Equal variance.</p>
<p><strong>Linearity</strong> assumes that the relationship between predictors and outcome is linear. This doesn’t mean the relationship has to be perfectly straight, but the general pattern should follow a linear trend. If the true relationship is curved, a straight line will systematically over-predict in some regions and under-predict in others, leading to biased results.</p>
<p><strong>Independence</strong> requires that observations are independent of each other. This assumption is often violated in ways that aren’t immediately obvious, such as when data points are clustered in time, space, or social groups. When observations are correlated, our standard errors become unreliable, leading to overconfident statistical inferences.</p>
<p><strong>Normality</strong> refers to the distribution of <strong>residuals</strong>, not the original variables. The residuals should be approximately normally distributed around zero. This assumption is particularly important for hypothesis testing and confidence intervals, though it becomes less critical with larger sample sizes due to the Central Limit Theorem.</p>
<p><strong>Equal</strong> variance, also called <strong>homoscedasticity</strong>, requires that residuals have constant variance across all values of the predictors. When this assumption is violated (called <strong>heteroscedasticity</strong>), our model’s predictions become more reliable for some values than others, and our standard errors become incorrect.</p>
<p>Understanding why these assumptions matter helps us make better modeling decisions. Each assumption serves a specific purpose in ensuring that our regression results are trustworthy and interpretable. Linearity ensures that our linear model accurately captures the relationship. Independence is crucial for valid statistical inference because correlated observations invalidate our standard error calculations. Normality of residuals is needed for valid hypothesis tests and confidence intervals, particularly in smaller samples. Equal variance ensures that our model’s predictions are equally reliable across all values of the predictors.</p>
</section><section id="residual-diagnostics" class="level2"><h2 class="anchored" data-anchor-id="residual-diagnostics">Residual Diagnostics</h2>
<p>While our earlier exploratory data analysis provided early warnings about potential assumption violations, EDA alone is not sufficient for checking assumptions. The patterns we see in raw data guide our transformation decisions, but we need to examine residuals from our fitted model (using the transformed variables) to formally check whether our assumptions are met. Residuals represent what’s left unexplained after our model has done its best to capture the relationships in the data.</p>
<p>Let’s fit our model and then examine the residuals to systematically check our assumptions. We’ll use the democracy model we have been developing throughout this module series, which includes log-transformed wealth (based on what we learned from our EDA), polarization, corruption, and regional controls.</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Fit our democracy model</span></span>
<span><span class="va">democracy_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">lib_dem</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">wealth</span><span class="op">)</span> <span class="op">+</span> <span class="va">polarization</span> <span class="op">+</span> <span class="va">corruption</span> <span class="op">+</span> <span class="va">women_empowerment</span> <span class="op">+</span> <span class="va">region</span>, data <span class="op">=</span> <span class="va">model_data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Quick model summary</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">democracy_model</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = lib_dem ~ log(wealth) + polarization + corruption + 
    women_empowerment + region, data = model_data)

Residuals:
     Min       1Q   Median       3Q      Max 
-0.43252 -0.06331  0.00253  0.07402  0.26311 

Coefficients:
                      Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)           0.125962   0.093258   1.351   0.1787    
log(wealth)          -0.001450   0.014026  -0.103   0.9178    
polarization         -0.009154   0.008323  -1.100   0.2730    
corruption           -0.344607   0.055068  -6.258 3.35e-09 ***
women_empowerment     0.640860   0.072556   8.833 1.61e-15 ***
regionLatin America   0.062175   0.033837   1.837   0.0680 .  
regionMENA           -0.004997   0.043303  -0.115   0.9083    
regionSS Africa      -0.011206   0.034987  -0.320   0.7491    
regionThe West        0.109096   0.039341   2.773   0.0062 ** 
regionAsia &amp; Pacific -0.029083   0.036100  -0.806   0.4216    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.1228 on 162 degrees of freedom
  (5 observations deleted due to missingness)
Multiple R-squared:  0.8055,    Adjusted R-squared:  0.7947 
F-statistic: 74.55 on 9 and 162 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<p>Now we’ll systematically check each assumption using residual plots. Residuals are the differences between our observed values and the values predicted by our model. If our model is appropriate and our assumptions are met, these residuals should exhibit random patterns with no systematic structure.</p>
<section id="checking-linearity-residuals-vs.-fitted" class="level4"><h4 class="anchored" data-anchor-id="checking-linearity-residuals-vs.-fitted">Checking Linearity: Residuals vs.&nbsp;Fitted</h4>
<p>The residuals versus fitted values plot is perhaps the most important diagnostic plot because it can reveal multiple types of problems simultaneously. If our linearity assumption is met, residuals should be randomly scattered around zero with no systematic patterns.</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://plotly-r.com">plotly</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract model information</span></span>
<span><span class="va">model_data_diag</span> <span class="op">&lt;-</span> <span class="va">model_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    fitted <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/fitted.values.html">fitted</a></span><span class="op">(</span><span class="va">democracy_model</span><span class="op">)</span>,</span>
<span>    residuals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/residuals.html">residuals</a></span><span class="op">(</span><span class="va">democracy_model</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Residuals vs. fitted plot</span></span>
<span><span class="va">r_vs_fitted</span> <span class="op">&lt;-</span> <span class="va">model_data_diag</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">fitted</span>, y <span class="op">=</span> <span class="va">residuals</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">country</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, color <span class="op">=</span> <span class="st">"red"</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>se <span class="op">=</span> <span class="cn">FALSE</span>, color <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Fitted Values"</span>, y <span class="op">=</span> <span class="st">"Residuals"</span>,</span>
<span>       title <span class="op">=</span> <span class="st">"Residuals vs. Fitted Values"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly</a></span><span class="op">(</span><span class="va">r_vs_fitted</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>   <span class="fu">config</span><span class="op">(</span>displayModeBar <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-f9583d2e9c481e8cbdc6" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-f9583d2e9c481e8cbdc6">{"x":{"data":[{"x":[0.4185529738308153,0.67343461567782792,0.85962073588505172,0.83528439234211804,0.42450076256260949,0.53020963620538342,0.59357667168094586,-0.045741821157818746,0.3250607691388101,0.37518673887352988,0.087473147268231785,-0.039921263992222095,0.48416948139878518,0.66876711285834933,0.54444460973665898,0.78840228642063748,0.80354369221982691,0.36945653590660732,0.17026075323161979,0.39629495112484137,0.17028984578291279,0.38215110693698195,0.28353887063440908,0.18252252760934384,0.502157624145674,0.49864893580866715,0.02061522112224988,0.38218335821006072,0.090681752185601705,0.53307814077537685,0.29419105945140217,0.34640440696193531,0.23633843173925223,0.067280868735679622,0.61374131417455791,0.1789386748751412,0.2621686900566696,0.36251569621352381,0.48278546204164136,0.54717613181745284,0.30108293042702106,0.3539961359084699,0.38989845292378567,0.46094727018927567,0.47303738327091505,0.43734970918615806,0.13718888451646719,0.27889197062765958,0.43389169669905625,0.19568143604306831,0.33748640160306015,0.35697415198982507,0.48757234504977442,0.27779832973013374,0.076390599422433772,0.30240661261298668,0.1736012375571602,0.81705701373568707,0.82576872963018666,0.53734557170055763,0.24041345455287821,0.55163987850372576,0.17505856867489872,0.72962294594091071,0.73079671281066516,0.46942680420051197,0.45938278839843361,0.7960821039117536,0.85933938285543232,0.30815386434375186,0.064334300442715542,0.092536188956366922,0.81476292429998354,0.73081209368731548,0.32419360610485176,0.68406474749782675,0.39925113068936435,0.38101591296066606,0.38339416500813439,0.22861402384657492,0.41376461545701637,0.3214525978081606,0.83266857808801564,0.50407425833353559,0.18549936627417826,0.19600511751876826,0.28884142127431256,0.83754041886791308,0.073322070893946129,0.25932301211158043,0.31592622032567702,0.3893396898416488,0.80129156005810276,0.74654305673463617,0.28279296428569445,0.21694817602612271,0.26842866023182521,0.17972580630950022,0.52951995401624208,0.23450381813600335,0.069892993506462678,0.31608254578707495,0.099900749526191018,0.0056734032897507031,0.19966889347969644,0.42328255670373516,-0.023834033531174116,0.26881183331467995,0.28971045909944054,0.58076621042089283,0.25704002616175442,0.69949194099933076,0.32561220558271647,0.20683390531672852,0.11977243388981217,-0.049928232580919676,0.25757896349436576,0.39460034072455424,0.5634180520813995,0.44705437454331476,-0.1416419319273366,0.28514947612799951,0.16182185169383964,0.12273287248884066,0.27793494359838911,0.71090710852470895,0.019762946838845476,0.15912733533769258,0.80092333499477875,0.1477072140150473,0.73427876257809155,0.83918014756223669,0.382031267084254,0.6009112652807137,0.17825816360134161,0.5483042545151674,0.41119443720878374,0.71278566176797975,0.62224008585192458,0.86654496795049285,0.089069300434763604,0.70285721869349205,0.32317064594147549,0.84455474328929736,0.7385197907887564,0.52066100672639537,0.83098465259744214,0.62234439810829612,0.19983522671512677,0.69307326872211072,0.79559139351796726,0.4772628728527416,0.29896774719355934,0.69383152249723734,0.43906462337334906,0.38978476734950301,0.85404463594327029,0.86186523708851748,0.27022010513359784,0.34319582085369377,0.41473498031766159,0.52306452279212423,0.044350075349106538,0.41365354857346887,0.52317555597342613,0.61376185712351017,0.5830579884813073,0.62043981044524021,0.18025032154605153,0.38482051352121838,0.24509457666083273,0.5763547608973949],"y":[0.061447026169184703,-0.018434615677827927,0.022379264114948297,0.0067156076578819175,0.20849923743739052,0.12179036379461666,0.1824233283190542,0.062741821157818747,-0.17506076913881008,0.071813261126470129,0.070526852731768216,0.19492126399222209,-0.036169481398785189,0.14223288714165072,0.22855539026334104,0.018597713579362598,0.042456307780173119,-0.013456535906607362,0.045739246768380197,0.071705048875158633,0.027710154217087238,-0.066151106936981952,0.13646112936559088,0.0074774723906561522,0.14984237585432603,0.03435106419133286,0.042384778877750121,-0.27118335821006073,0.1333182478143983,0.09192185922462319,-0.18319105945140218,0.22359559303806467,0.12066156826074777,-0.053280868735679623,0.15525868582544211,0.081061325124858807,0.035831309943330399,-0.011515696213523814,-0.082785462041641333,0.12782386818254718,-0.12608293042702109,-0.092996135908469862,-0.22189845292378566,0.083052729810724354,-0.30403738327091501,-0.094349709186158023,-0.015188884516467176,0.26310802937234046,-0.11989169669905626,0.017318563956931685,-0.013486401603060165,0.070025848010174932,-0.068572345049774455,-0.12679832973013375,0.034609400577566229,-0.0014066126129867096,-0.051601237557160201,-0.052057013735687073,0.0122312703698133,0.08465442829944235,-0.0524134545528782,0.14136012149627422,0.017941431325101273,0.10637705405908925,0.12220328718933485,-0.054426804200511984,0.0036172116015664091,0.0079178960882464785,0.012660617144567681,0.074846135656248161,0.055665699557284447,0.14546381104363307,0.001237075700016422,0.048187906312684492,-0.11719360610485177,0.021935252502173236,0.056748869310635677,0.11498408703933392,-0.01339416500813438,-0.10161402384657492,0.14623538454298368,-0.094452597808160565,-0.011668578088015727,0.050925741666464436,0.21250063372582176,-0.098005117518768267,0.060158578725687417,-0.027540418867913082,-0.021322070893946134,-0.16132301211158043,0.18007377967432298,-0.0093396898416488166,0.0047084399418972894,0.082456943265363791,-0.11479296428569444,-0.12294817602612272,-0.078428660231825223,-0.10672580630950022,-0.4325199540162421,-0.076503818136003349,0.026107006493537321,-0.26108254578707496,0.021099250473808975,0.088326596710249297,-0.08366889347969643,-0.070282556703735177,0.028834033531174117,-0.062811833314679946,-0.17271045909944052,-0.2027662104208928,0.021959973838245623,-0.061491940999330717,-0.20161220558271647,-0.020833905316728508,-0.041772433889812166,0.092928232580919673,-0.00057896349436575053,-0.049600340724554284,-0.010418052081399429,-0.32105437454331476,0.2376419319273366,-0.038149476127999529,-0.064821851693839638,-0.048732872488840659,-0.087934943598389076,-0.060907108524708965,-0.004762946838845478,-0.12712733533769258,-0.010923334994778724,-0.056707214015047296,-0.0862787625780915,-0.014180147562236707,0.033968732915746001,0.010088734719286232,0.073741836398658403,0.086695745484832623,-0.36819443720878375,0.001214338232020179,0.20675991414807543,0.028455032049507153,-0.033069300434763596,0.10714278130650798,-0.05117064594147544,0.0014452567107025736,0.070480209211243705,-0.14466100672639537,-0.051984652597442164,0.069655601891703861,0.093164773284873215,0.070926731277889302,-0.0065913935179672499,-0.024262872852741587,-0.088967747193559335,-0.081831522497237366,0.21093537662665099,-0.015784767349503005,-0.023044635943270299,0.0011347629114825482,-0.14522010513359784,0.089804179146306215,0.053265019682338412,0.016935477207875783,-0.0013500753491065447,0.11234645142653114,-0.1651755559734262,-0.30176185712351011,0.14494201151869265,0.12056018955475978,0.16574967845394845,0.12317948647878164,-0.17309457666083275,0.16864523910260507],"text":["fitted:  0.418552974<br />residuals:  0.0614470262<br />Mexico","fitted:  0.673434616<br />residuals: -0.0184346157<br />Suriname","fitted:  0.859620736<br />residuals:  0.0223792641<br />Sweden","fitted:  0.835284392<br />residuals:  0.0067156077<br />Switzerland","fitted:  0.424500763<br />residuals:  0.2084992374<br />Ghana","fitted:  0.530209636<br />residuals:  0.1217903638<br />South Africa","fitted:  0.593576672<br />residuals:  0.1824233283<br />Japan","fitted: -0.045741821<br />residuals:  0.0627418212<br />Burma/Myanmar","fitted:  0.325060769<br />residuals: -0.1750607691<br />Russia","fitted:  0.375186739<br />residuals:  0.0718132611<br />Albania","fitted:  0.087473147<br />residuals:  0.0705268527<br />Egypt","fitted: -0.039921264<br />residuals:  0.1949212640<br />Yemen","fitted:  0.484169481<br />residuals: -0.0361694814<br />Colombia","fitted:  0.668767113<br />residuals:  0.1422328871<br />Poland","fitted:  0.544444610<br />residuals:  0.2285553903<br />Brazil","fitted:  0.788402286<br />residuals:  0.0185977136<br />United States of America","fitted:  0.803543692<br />residuals:  0.0424563078<br />Portugal","fitted:  0.369456536<br />residuals: -0.0134565359<br />El Salvador","fitted:  0.170260753<br />residuals:  0.0457392468<br />Bangladesh","fitted:  0.396294951<br />residuals:  0.0717050489<br />Bolivia","fitted:  0.170289846<br />residuals:  0.0277101542<br />Haiti","fitted:  0.382151107<br />residuals: -0.0661511069<br />Honduras","fitted:  0.283538871<br />residuals:  0.1364611294<br />Mali","fitted:  0.182522528<br />residuals:  0.0074774724<br />Pakistan","fitted:  0.502157624<br />residuals:  0.1498423759<br />Peru","fitted:  0.498648936<br />residuals:  0.0343510642<br />Senegal","fitted:  0.020615221<br />residuals:  0.0423847789<br />Sudan","fitted:  0.382183358<br />residuals: -0.2711833582<br />Vietnam","fitted:  0.090681752<br />residuals:  0.1333182478<br />Afghanistan","fitted:  0.533078141<br />residuals:  0.0919218592<br />Argentina","fitted:  0.294191059<br />residuals: -0.1831910595<br />Ethiopia","fitted:  0.346404407<br />residuals:  0.2235955930<br />India","fitted:  0.236338432<br />residuals:  0.1206615683<br />Kenya","fitted:  0.067280869<br />residuals: -0.0532808687<br />North Korea","fitted:  0.613741314<br />residuals:  0.1552586858<br />South Korea","fitted:  0.178938675<br />residuals:  0.0810613251<br />Lebanon","fitted:  0.262168690<br />residuals:  0.0358313099<br />Nigeria","fitted:  0.362515696<br />residuals: -0.0115156962<br />Philippines","fitted:  0.482785462<br />residuals: -0.0827854620<br />Tanzania","fitted:  0.547176132<br />residuals:  0.1278238682<br />Taiwan","fitted:  0.301082930<br />residuals: -0.1260829304<br />Thailand","fitted:  0.353996136<br />residuals: -0.0929961359<br />Uganda","fitted:  0.389898453<br />residuals: -0.2218984529<br />Venezuela","fitted:  0.460947270<br />residuals:  0.0830527298<br />Benin","fitted:  0.473037383<br />residuals: -0.3040373833<br />Bhutan","fitted:  0.437349709<br />residuals: -0.0943497092<br />Burkina Faso","fitted:  0.137188885<br />residuals: -0.0151888845<br />Cambodia","fitted:  0.278891971<br />residuals:  0.2631080294<br />Indonesia","fitted:  0.433891697<br />residuals: -0.1198916967<br />Mozambique","fitted:  0.195681436<br />residuals:  0.0173185640<br />Nepal","fitted:  0.337486402<br />residuals: -0.0134864016<br />Nicaragua","fitted:  0.356974152<br />residuals:  0.0700258480<br />Niger","fitted:  0.487572345<br />residuals: -0.0685723450<br />Zambia","fitted:  0.277798330<br />residuals: -0.1267983297<br />Zimbabwe","fitted:  0.076390599<br />residuals:  0.0346094006<br />Guinea","fitted:  0.302406613<br />residuals: -0.0014066126<br />Ivory Coast","fitted:  0.173601238<br />residuals: -0.0516012376<br />Mauritania","fitted:  0.817057014<br />residuals: -0.0520570137<br />Canada","fitted:  0.825768730<br />residuals:  0.0122312704<br />Australia","fitted:  0.537345572<br />residuals:  0.0846544283<br />Botswana","fitted:  0.240413455<br />residuals: -0.0524134546<br />Burundi","fitted:  0.551639879<br />residuals:  0.1413601215<br />Cape Verde","fitted:  0.175058569<br />residuals:  0.0179414313<br />Central African Republic","fitted:  0.729622946<br />residuals:  0.1063770541<br />Chile","fitted:  0.730796713<br />residuals:  0.1222032872<br />Costa Rica","fitted:  0.469426804<br />residuals: -0.0544268042<br />Timor-Leste","fitted:  0.459382788<br />residuals:  0.0036172116<br />Ecuador","fitted:  0.796082104<br />residuals:  0.0079178961<br />France","fitted:  0.859339383<br />residuals:  0.0126606171<br />Germany","fitted:  0.308153864<br />residuals:  0.0748461357<br />Guatemala","fitted:  0.064334300<br />residuals:  0.0556656996<br />Iran","fitted:  0.092536189<br />residuals:  0.1454638110<br />Iraq","fitted:  0.814762924<br />residuals:  0.0012370757<br />Ireland","fitted:  0.730812094<br />residuals:  0.0481879063<br />Italy","fitted:  0.324193606<br />residuals: -0.1171936061<br />Jordan","fitted:  0.684064747<br />residuals:  0.0219352525<br />Latvia","fitted:  0.399251131<br />residuals:  0.0567488693<br />Lesotho","fitted:  0.381015913<br />residuals:  0.1149840870<br />Liberia","fitted:  0.383394165<br />residuals: -0.0133941650<br />Malawi","fitted:  0.228614024<br />residuals: -0.1016140238<br />Maldives","fitted:  0.413764615<br />residuals:  0.1462353845<br />Mongolia","fitted:  0.321452598<br />residuals: -0.0944525978<br />Morocco","fitted:  0.832668578<br />residuals: -0.0116685781<br />Netherlands","fitted:  0.504074258<br />residuals:  0.0509257417<br />Panama","fitted:  0.185499366<br />residuals:  0.2125006337<br />Papua New Guinea","fitted:  0.196005118<br />residuals: -0.0980051175<br />Qatar","fitted:  0.288841421<br />residuals:  0.0601585787<br />Sierra Leone","fitted:  0.837540419<br />residuals: -0.0275404189<br />Spain","fitted:  0.073322071<br />residuals: -0.0213220709<br />Syria","fitted:  0.259323012<br />residuals: -0.1613230121<br />Tunisia","fitted:  0.315926220<br />residuals:  0.1800737797<br />Türkiye","fitted:  0.389339690<br />residuals: -0.0093396898<br />Ukraine","fitted:  0.801291560<br />residuals:  0.0047084399<br />United Kingdom","fitted:  0.746543057<br />residuals:  0.0824569433<br />Uruguay","fitted:  0.282792964<br />residuals: -0.1147929643<br />Algeria","fitted:  0.216948176<br />residuals: -0.1229481760<br />Angola","fitted:  0.268428660<br />residuals: -0.0784286602<br />Armenia","fitted:  0.179725806<br />residuals: -0.1067258063<br />Azerbaijan","fitted:  0.529519954<br />residuals: -0.4325199540<br />Belarus","fitted:  0.234503818<br />residuals: -0.0765038181<br />Cameroon","fitted:  0.069892994<br />residuals:  0.0261070065<br />Chad","fitted:  0.316082546<br />residuals: -0.2610825458<br />China","fitted:  0.099900750<br />residuals:  0.0210992505<br />Democratic Republic of the Congo","fitted:  0.005673403<br />residuals:  0.0883265967<br />Republic of the Congo","fitted:  0.199668893<br />residuals: -0.0836688935<br />Djibouti","fitted:  0.423282557<br />residuals: -0.0702825567<br />Dominican Republic","fitted: -0.023834034<br />residuals:  0.0288340335<br />Eritrea","fitted:  0.268811833<br />residuals: -0.0628118333<br />Gabon","fitted:  0.289710459<br />residuals: -0.1727104591<br />The Gambia","fitted:  0.580766210<br />residuals: -0.2027662104<br />Georgia","fitted:  0.257040026<br />residuals:  0.0219599738<br />Guinea-Bissau","fitted:  0.699491941<br />residuals: -0.0614919410<br />Jamaica","fitted:  0.325612206<br />residuals: -0.2016122056<br />Kazakhstan","fitted:  0.206833905<br />residuals: -0.0208339053<br />Kyrgyzstan","fitted:  0.119772434<br />residuals: -0.0417724339<br />Laos","fitted: -0.049928233<br />residuals:  0.0929282326<br />Libya","fitted:  0.257578963<br />residuals: -0.0005789635<br />Madagascar","fitted:  0.394600341<br />residuals: -0.0496003407<br />Moldova","fitted:  0.563418052<br />residuals: -0.0104180521<br />Namibia","fitted:  0.447054375<br />residuals: -0.3210543745<br />Rwanda","fitted: -0.141641932<br />residuals:  0.2376419319<br />Somalia","fitted:  0.285149476<br />residuals: -0.0381494761<br />Sri Lanka","fitted:  0.161821852<br />residuals: -0.0648218517<br />Eswatini","fitted:  0.122732872<br />residuals: -0.0487328725<br />Tajikistan","fitted:  0.277934944<br />residuals: -0.0879349436<br />Togo","fitted:  0.710907109<br />residuals: -0.0609071085<br />Trinidad and Tobago","fitted:  0.019762947<br />residuals: -0.0047629468<br />Turkmenistan","fitted:  0.159127335<br />residuals: -0.1271273353<br />Uzbekistan","fitted:  0.800923335<br />residuals: -0.0109233350<br />Austria","fitted:  0.147707214<br />residuals: -0.0567072140<br />Bahrain","fitted:  0.734278763<br />residuals: -0.0862787626<br />Barbados","fitted:  0.839180148<br />residuals: -0.0141801476<br />Belgium","fitted:  0.382031267<br />residuals:  0.0339687329<br />Bosnia and Herzegovina","fitted:  0.600911265<br />residuals:  0.0100887347<br />Bulgaria","fitted:  0.178258164<br />residuals:  0.0737418364<br />Comoros","fitted:  0.548304255<br />residuals:  0.0866957455<br />Croatia","fitted:  0.411194437<br />residuals: -0.3681944372<br />Cuba","fitted:  0.712785662<br />residuals:  0.0012143382<br />Cyprus","fitted:  0.622240086<br />residuals:  0.2067599141<br />Czechia","fitted:  0.866544968<br />residuals:  0.0284550320<br />Denmark","fitted:  0.089069300<br />residuals: -0.0330693004<br />Equatorial Guinea","fitted:  0.702857219<br />residuals:  0.1071427813<br />Estonia","fitted:  0.323170646<br />residuals: -0.0511706459<br />Fiji","fitted:  0.844554743<br />residuals:  0.0014452567<br />Finland","fitted:  0.738519791<br />residuals:  0.0704802092<br />Greece","fitted:  0.520661007<br />residuals: -0.1446610067<br />Guyana","fitted:  0.830984653<br />residuals: -0.0519846526<br />Iceland","fitted:  0.622344398<br />residuals:  0.0696556019<br />Israel","fitted:  0.199835227<br />residuals:  0.0931647733<br />Kuwait","fitted:  0.693073269<br />residuals:  0.0709267313<br />Lithuania","fitted:  0.795591394<br />residuals: -0.0065913935<br />Luxembourg","fitted:  0.477262873<br />residuals: -0.0242628729<br />North Macedonia","fitted:  0.298967747<br />residuals: -0.0889677472<br />Malaysia","fitted:  0.693831522<br />residuals: -0.0818315225<br />Malta","fitted:  0.439064623<br />residuals:  0.2109353766<br />Mauritius","fitted:  0.389784767<br />residuals: -0.0157847673<br />Montenegro","fitted:  0.854044636<br />residuals: -0.0230446359<br />New Zealand","fitted:  0.861865237<br />residuals:  0.0011347629<br />Norway","fitted:  0.270220105<br />residuals: -0.1452201051<br />Oman","fitted:  0.343195821<br />residuals:  0.0898041791<br />Paraguay","fitted:  0.414734980<br />residuals:  0.0532650197<br />Romania","fitted:  0.523064523<br />residuals:  0.0169354772<br />Sao Tome and Principe","fitted:  0.044350075<br />residuals: -0.0013500753<br />Saudi Arabia","fitted:  0.413653549<br />residuals:  0.1123464514<br />Serbia","fitted:  0.523175556<br />residuals: -0.1651755560<br />Seychelles","fitted:  0.613761857<br />residuals: -0.3017618571<br />Singapore","fitted:  0.583057988<br />residuals:  0.1449420115<br />Slovakia","fitted:  0.620439810<br />residuals:  0.1205601896<br />Slovenia","fitted:  0.180250322<br />residuals:  0.1657496785<br />Solomon Islands","fitted:  0.384820514<br />residuals:  0.1231794865<br />Vanuatu","fitted:  0.245094577<br />residuals: -0.1730945767<br />United Arab Emirates","fitted:  0.576354761<br />residuals:  0.1686452391<br />Hungary"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":0.59999999999999998,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.19205127692122806,0.91695431294438434],"y":[0,0],"text":"yintercept: 0","type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(255,0,0,1)","dash":"dash"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.1416419319273366,-0.12888007243521218,-0.11611821294308775,-0.10335635345096333,-0.090594493958838895,-0.077832634466714484,-0.065070774974590059,-0.052308915482465634,-0.039547055990341209,-0.026785196498216784,-0.014023337006092373,-0.0012614775139679346,0.011500381978156476,0.024262241470280915,0.037024100962405326,0.049785960454529765,0.062547819946654176,0.075309679438778587,0.088071538930903026,0.10083339842302744,0.11359525791515185,0.12635711740727629,0.13911897689940073,0.15188083639152516,0.16464269588364955,0.17740455537577399,0.19016641486789843,0.20292827436002281,0.21569013385214725,0.22845199334427169,0.24121385283639613,0.25397571232852051,0.26673757182064495,0.27949943131276939,0.29226129080489377,0.30502315029701821,0.31778500978914265,0.33054686928126709,0.34330872877339147,0.35607058826551591,0.36883244775764029,0.38159430724976479,0.39435616674188917,0.40711802623401355,0.41987988572613805,0.43264174521826243,0.44540360471038692,0.45816546420251131,0.47092732369463569,0.48368918318676019,0.49645104267888457,0.50921290217100901,0.52197476166313339,0.53473662115525777,0.54749848064738216,0.56026034013950676,0.57302219963163115,0.58578405912375553,0.59854591861587991,0.6113077781080043,0.6240696376001289,0.63683149709225328,0.64959335658437767,0.66235521607650205,0.67511707556862643,0.68787893506075082,0.70064079455287542,0.71340265404499981,0.72616451353712419,0.73892637302924857,0.75168823252137296,0.76445009201349756,0.77721195150562195,0.78997381099774633,0.80273567048987071,0.8154975299819951,0.82825938947411948,0.84102124896624408,0.85378310845836847,0.86654496795049285],"y":[0.19684231791093515,0.18386150736619533,0.17124770346426482,0.15900259234010705,0.14712786012868526,0.13562519296496267,0.12449627698390253,0.11374279832046813,0.10336644310962279,0.093368897486329677,0.083751847585552125,0.074516979542253392,0.065665979491396714,0.057200533567945348,0.049122327906862627,0.041433048643111731,0.034134381911655985,0.02722801384745863,0.020715630585482942,0.01459891826069218,0.0088795630080496079,0.0035592509625184932,-0.0013589154912055502,-0.005806404027708852,-0.0097806118931547063,-0.013329502406748225,-0.016501038887694469,-0.019343184655198506,-0.021903903028465434,-0.024231157326700326,-0.026358922476757723,-0.028236964306635103,-0.029846385454950233,-0.031177506807994314,-0.032220649252058503,-0.03297096988577744,-0.03355067281016428,-0.033946380631662547,-0.034063012438081831,-0.033805487317231715,-0.033078724356921774,-0.031787642644961582,-0.029578954153498972,-0.026192487628671886,-0.021992839425941806,-0.017353118891471078,-0.012646435371421934,-0.008245898211956728,-0.0045246167592377174,-0.001259691443823684,0.0023809788151916726,0.006249158192073721,0.010174144919120559,0.013985237228630334,0.017511733352901172,0.020582931524231247,0.023028129974918592,0.024738201795847247,0.026177208685524291,0.027455794092257652,0.028546751582143495,0.029422874721277914,0.030056957075757059,0.030421792211677075,0.030490173695134088,0.03023489509222424,0.029628749969043643,0.02864453189168847,0.027255034426254834,0.025433116590432361,0.023224804602951149,0.020686017473771561,0.017816433489659795,0.014615730937381929,0.011083588103704073,0.0072196832753923437,0.0030236947392128549,-0.0015046992180683626,-0.0063658203096850332,-0.011559990248871124],"text":["fitted: -0.141641932<br />residuals:  0.196842318","fitted: -0.128880072<br />residuals:  0.183861507","fitted: -0.116118213<br />residuals:  0.171247703","fitted: -0.103356353<br />residuals:  0.159002592","fitted: -0.090594494<br />residuals:  0.147127860","fitted: -0.077832634<br />residuals:  0.135625193","fitted: -0.065070775<br />residuals:  0.124496277","fitted: -0.052308915<br />residuals:  0.113742798","fitted: -0.039547056<br />residuals:  0.103366443","fitted: -0.026785196<br />residuals:  0.093368897","fitted: -0.014023337<br />residuals:  0.083751848","fitted: -0.001261478<br />residuals:  0.074516980","fitted:  0.011500382<br />residuals:  0.065665979","fitted:  0.024262241<br />residuals:  0.057200534","fitted:  0.037024101<br />residuals:  0.049122328","fitted:  0.049785960<br />residuals:  0.041433049","fitted:  0.062547820<br />residuals:  0.034134382","fitted:  0.075309679<br />residuals:  0.027228014","fitted:  0.088071539<br />residuals:  0.020715631","fitted:  0.100833398<br />residuals:  0.014598918","fitted:  0.113595258<br />residuals:  0.008879563","fitted:  0.126357117<br />residuals:  0.003559251","fitted:  0.139118977<br />residuals: -0.001358915","fitted:  0.151880836<br />residuals: -0.005806404","fitted:  0.164642696<br />residuals: -0.009780612","fitted:  0.177404555<br />residuals: -0.013329502","fitted:  0.190166415<br />residuals: -0.016501039","fitted:  0.202928274<br />residuals: -0.019343185","fitted:  0.215690134<br />residuals: -0.021903903","fitted:  0.228451993<br />residuals: -0.024231157","fitted:  0.241213853<br />residuals: -0.026358922","fitted:  0.253975712<br />residuals: -0.028236964","fitted:  0.266737572<br />residuals: -0.029846385","fitted:  0.279499431<br />residuals: -0.031177507","fitted:  0.292261291<br />residuals: -0.032220649","fitted:  0.305023150<br />residuals: -0.032970970","fitted:  0.317785010<br />residuals: -0.033550673","fitted:  0.330546869<br />residuals: -0.033946381","fitted:  0.343308729<br />residuals: -0.034063012","fitted:  0.356070588<br />residuals: -0.033805487","fitted:  0.368832448<br />residuals: -0.033078724","fitted:  0.381594307<br />residuals: -0.031787643","fitted:  0.394356167<br />residuals: -0.029578954","fitted:  0.407118026<br />residuals: -0.026192488","fitted:  0.419879886<br />residuals: -0.021992839","fitted:  0.432641745<br />residuals: -0.017353119","fitted:  0.445403605<br />residuals: -0.012646435","fitted:  0.458165464<br />residuals: -0.008245898","fitted:  0.470927324<br />residuals: -0.004524617","fitted:  0.483689183<br />residuals: -0.001259691","fitted:  0.496451043<br />residuals:  0.002380979","fitted:  0.509212902<br />residuals:  0.006249158","fitted:  0.521974762<br />residuals:  0.010174145","fitted:  0.534736621<br />residuals:  0.013985237","fitted:  0.547498481<br />residuals:  0.017511733","fitted:  0.560260340<br />residuals:  0.020582932","fitted:  0.573022200<br />residuals:  0.023028130","fitted:  0.585784059<br />residuals:  0.024738202","fitted:  0.598545919<br />residuals:  0.026177209","fitted:  0.611307778<br />residuals:  0.027455794","fitted:  0.624069638<br />residuals:  0.028546752","fitted:  0.636831497<br />residuals:  0.029422875","fitted:  0.649593357<br />residuals:  0.030056957","fitted:  0.662355216<br />residuals:  0.030421792","fitted:  0.675117076<br />residuals:  0.030490174","fitted:  0.687878935<br />residuals:  0.030234895","fitted:  0.700640795<br />residuals:  0.029628750","fitted:  0.713402654<br />residuals:  0.028644532","fitted:  0.726164514<br />residuals:  0.027255034","fitted:  0.738926373<br />residuals:  0.025433117","fitted:  0.751688233<br />residuals:  0.023224805","fitted:  0.764450092<br />residuals:  0.020686017","fitted:  0.777211952<br />residuals:  0.017816433","fitted:  0.789973811<br />residuals:  0.014615731","fitted:  0.802735670<br />residuals:  0.011083588","fitted:  0.815497530<br />residuals:  0.007219683","fitted:  0.828259389<br />residuals:  0.003023695","fitted:  0.841021249<br />residuals: -0.001504699","fitted:  0.853783108<br />residuals: -0.006365820","fitted:  0.866544968<br />residuals: -0.011559990"],"type":"scatter","mode":"lines","name":"fitted values","line":{"width":3.7795275590551185,"color":"rgba(0,0,255,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826498,"l":54.794520547945211},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Residuals vs. Fitted Values","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.19205127692122806,0.91695431294438434],"tickmode":"array","ticktext":["0.0","0.3","0.6","0.9"],"tickvals":[0,0.30000000000000004,0.60000000000000009,0.90000000000000024],"categoryorder":"array","categoryarray":["0.0","0.3","0.6","0.9"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Fitted Values","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.46730135318567123,0.29788942854176959],"tickmode":"array","ticktext":["-0.25","0.00","0.25"],"tickvals":[-0.25,0,0.25],"categoryorder":"array","categoryarray":["-0.25","0.00","0.25"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Residuals","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":false},"source":"A","attrs":{"165e91c88daf0":{"x":{},"y":{},"text":{},"type":"scatter"},"165e95cddd132":{"yintercept":{}},"165e966d1593f":{"x":{},"y":{}}},"cur_data":"165e91c88daf0","visdat":{"165e91c88daf0":["function (y) ","x"],"165e95cddd132":["function (y) ","x"],"165e966d1593f":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Here we are looking at the residuals (the differences between observed and predicted values) plotted against the fitted values (the predicted values from our model). The red dashed line represents zero, and the blue line is a smoothing line that helps us see the overall trend in the residuals. Points above the red line indicate that our model under-predicted those observations (meaning the model predicted that the country was less democracy than it actually was), while points below the line indicate over-predictions (meaning that the model predicted that the country was more democratic than in reality).</p>
<p>Ideally we would want to see points that are randomly scattered around the horizontal line at y = 0. The blue smoothing line should be roughly horizontal and close to zero. If we see systematic patterns such as U-shapes, inverted U-shapes, or consistent trends, this suggests that our linear model is missing important non-linear relationships.</p>
<p>In this case, we definitely see some curvature to the line. The model is under-predicting countries with low democracy scores, over-predicting countries with mid-level democracy scores and under-predicting again at higher levels of democracy. This suggests that the relationship between our predictors and the outcome is not purely linear, and we might need to consider non-linear transformations or additional predictors to capture this pattern.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The model predicts values of democracy below what an actual country could achieve, which is not possible. This may be due to nonlinearity in the relationship between our predictors and the dependent variable as we already discussed. But it could also be due to the fact that our dependent variable, <code>lib_dem</code>, is bounded between 0 and 1. We could therefore consider other models that are designed for bounded outcomes, such as beta regression or tobit models. However, for the purposes of this module, we will continue with linear regression and focus on checking our assumptions.</p>
</div>
</div>
</section><section id="checking-normality-q-q-plot" class="level4"><h4 class="anchored" data-anchor-id="checking-normality-q-q-plot">Checking Normality: Q-Q Plot</h4>
<p>The Q-Q (quantile-quantile) plot compares the distribution of our residuals to what we would expect from a normal distribution. This plot is particularly useful because it makes deviations from normality easy to spot.</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Calculate Q-Q values manually to preserve country names</span></span>
<span><span class="va">qq_data</span> <span class="op">&lt;-</span> <span class="va">model_data_diag</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">residuals</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    theoretical <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">qnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/ppoints.html">ppoints</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">residuals</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    ordered_residuals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="va">residuals</span><span class="op">)</span>,</span>
<span>    country_ordered <span class="op">=</span> <span class="va">country</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">residuals</span><span class="op">)</span><span class="op">]</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">qq_plot</span> <span class="op">&lt;-</span> <span class="va">qq_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">theoretical</span>, y <span class="op">=</span> <span class="va">ordered_residuals</span>, text <span class="op">=</span> <span class="va">country_ordered</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_abline</a></span><span class="op">(</span>slope <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">model_data_diag</span><span class="op">$</span><span class="va">residuals</span><span class="op">)</span>, </span>
<span>              intercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">model_data_diag</span><span class="op">$</span><span class="va">residuals</span><span class="op">)</span>, </span>
<span>              color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Normal Q-Q Plot of Residuals"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Theoretical Quantiles"</span>, </span>
<span>       y <span class="op">=</span> <span class="st">"Sample Quantiles"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">qq_plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="module-4.6_files/figure-html/qq-plot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># ggplotly(qq_plot) |&gt;</span></span>
<span><span class="co">#   config(displayModeBar = FALSE)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Points should fall roughly along the red diagonal line if residuals are <strong>normally distributed</strong>. Systematic deviations from this line suggest non-normal residuals. Points that curve away from the line at the ends indicate <strong>heavy tails</strong>, while <strong>S-shaped curves</strong> suggest <strong>skewness</strong>. Small deviations aren’t usually concerning, especially with larger sample sizes, but dramatic departures from the line warrant attention.</p>
<p>Looking at this Q-Q plot, we can see a pattern that is fairly reassuring about our model’s performance. The points follow the red diagonal line quite well through the middle range (roughly between -1.5 and +1.5 theoretical quantiles), indicating that the central portion of our residuals is approximately normally distributed. However, at both ends of the distribution, the points fall slightly below the line, suggesting that our residuals have “light tails” compared to a perfect normal distribution. This means our model produces fewer extreme prediction errors—both very large over-predictions and very large under-predictions—than we would expect from a normal distribution.</p>
</section><section id="checking-equal-variance-scale-location-plot" class="level4"><h4 class="anchored" data-anchor-id="checking-equal-variance-scale-location-plot">Checking Equal Variance: Scale-Location Plot</h4>
<p>The <strong>scale-location plot</strong> helps us assess whether the variance of residuals remains constant across all fitted values. This plot uses the square root of the absolute value of residuals, which makes patterns easier to see.</p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-faa1e82e6d38f6275460" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-faa1e82e6d38f6275460">{"x":{"data":[{"x":[0.4185529738308153,0.67343461567782792,0.85962073588505172,0.83528439234211804,0.42450076256260949,0.53020963620538342,0.59357667168094586,-0.045741821157818746,0.3250607691388101,0.37518673887352988,0.087473147268231785,-0.039921263992222095,0.48416948139878518,0.66876711285834933,0.54444460973665898,0.78840228642063748,0.80354369221982691,0.36945653590660732,0.17026075323161979,0.39629495112484137,0.17028984578291279,0.38215110693698195,0.28353887063440908,0.18252252760934384,0.502157624145674,0.49864893580866715,0.02061522112224988,0.38218335821006072,0.090681752185601705,0.53307814077537685,0.29419105945140217,0.34640440696193531,0.23633843173925223,0.067280868735679622,0.61374131417455791,0.1789386748751412,0.2621686900566696,0.36251569621352381,0.48278546204164136,0.54717613181745284,0.30108293042702106,0.3539961359084699,0.38989845292378567,0.46094727018927567,0.47303738327091505,0.43734970918615806,0.13718888451646719,0.27889197062765958,0.43389169669905625,0.19568143604306831,0.33748640160306015,0.35697415198982507,0.48757234504977442,0.27779832973013374,0.076390599422433772,0.30240661261298668,0.1736012375571602,0.81705701373568707,0.82576872963018666,0.53734557170055763,0.24041345455287821,0.55163987850372576,0.17505856867489872,0.72962294594091071,0.73079671281066516,0.46942680420051197,0.45938278839843361,0.7960821039117536,0.85933938285543232,0.30815386434375186,0.064334300442715542,0.092536188956366922,0.81476292429998354,0.73081209368731548,0.32419360610485176,0.68406474749782675,0.39925113068936435,0.38101591296066606,0.38339416500813439,0.22861402384657492,0.41376461545701637,0.3214525978081606,0.83266857808801564,0.50407425833353559,0.18549936627417826,0.19600511751876826,0.28884142127431256,0.83754041886791308,0.073322070893946129,0.25932301211158043,0.31592622032567702,0.3893396898416488,0.80129156005810276,0.74654305673463617,0.28279296428569445,0.21694817602612271,0.26842866023182521,0.17972580630950022,0.52951995401624208,0.23450381813600335,0.069892993506462678,0.31608254578707495,0.099900749526191018,0.0056734032897507031,0.19966889347969644,0.42328255670373516,-0.023834033531174116,0.26881183331467995,0.28971045909944054,0.58076621042089283,0.25704002616175442,0.69949194099933076,0.32561220558271647,0.20683390531672852,0.11977243388981217,-0.049928232580919676,0.25757896349436576,0.39460034072455424,0.5634180520813995,0.44705437454331476,-0.1416419319273366,0.28514947612799951,0.16182185169383964,0.12273287248884066,0.27793494359838911,0.71090710852470895,0.019762946838845476,0.15912733533769258,0.80092333499477875,0.1477072140150473,0.73427876257809155,0.83918014756223669,0.382031267084254,0.6009112652807137,0.17825816360134161,0.5483042545151674,0.41119443720878374,0.71278566176797975,0.62224008585192458,0.86654496795049285,0.089069300434763604,0.70285721869349205,0.32317064594147549,0.84455474328929736,0.7385197907887564,0.52066100672639537,0.83098465259744214,0.62234439810829612,0.19983522671512677,0.69307326872211072,0.79559139351796726,0.4772628728527416,0.29896774719355934,0.69383152249723734,0.43906462337334906,0.38978476734950301,0.85404463594327029,0.86186523708851748,0.27022010513359784,0.34319582085369377,0.41473498031766159,0.52306452279212423,0.044350075349106538,0.41365354857346887,0.52317555597342613,0.61376185712351017,0.5830579884813073,0.62043981044524021,0.18025032154605153,0.38482051352121838,0.24509457666083273,0.5763547608973949],"y":[0.24788510679180528,0.13577413478946543,0.14959700570181308,0.081948811204811983,0.45661716726092388,0.34898476155072539,0.42711044042384894,0.25048317539870568,0.41840263997590893,0.26797996403923585,0.265568922752208,0.44149888334198772,0.19018275789036498,0.37713775618684842,0.4780746701754246,0.13637343428748355,0.20604928483295717,0.11600230991927429,0.21386735788422739,0.26777798429885646,0.16646367236453496,0.25719857491242432,0.36940645550070028,0.086472379351190246,0.38709478923685608,0.18534040086104503,0.20587563934994865,0.52075268430422972,0.36512771438826486,0.30318617914513052,0.42800824694321277,0.47285895681277379,0.34736374056707153,0.23082649054144463,0.39402878806686459,0.28471270629330686,0.18929160029787481,0.10731121196559013,0.28772462884091332,0.35752463996562134,0.35508158277643898,0.30495267814608523,0.47106098641660576,0.28818870521018752,0.55139584988546564,0.30716397768318804,0.12324319257657672,0.51294057099467227,0.3462538038766596,0.13160001503393412,0.11613096745941698,0.26462397474562832,0.2618632182070908,0.35608753099502621,0.18603601957031393,0.037504834528187293,0.22715905783648646,0.22816006165779118,0.11059507389487698,0.2909543405750159,0.22893984920253224,0.37597888437553806,0.13394562824184025,0.32615495406185269,0.34957586757288445,0.23329552974824011,0.06014325898690899,0.08898256058490607,0.11251940785734557,0.27358021795489557,0.23593579541325316,0.38139718279456791,0.03517208694428612,0.21951743965499526,0.3423355168615313,0.14810554514322966,0.23822021180125685,0.3390930359640757,0.1157331629574444,0.31876954661098811,0.38240735419573679,0.30733141363707123,0.10802119277260239,0.22566732520784757,0.46097791023629514,0.31305769040029707,0.24527245814743942,0.16595306224325324,0.14602078925257914,0.40165036052713859,0.4243510099838611,0.096642070764490634,0.068618072997551377,0.28715317039058402,0.33881110413576243,0.35063966693191279,0.28005117430895593,0.32668915854294922,0.65766249248093978,0.27659323588259233,0.16157662731205066,0.51096237218319218,0.14525581046487943,0.2971979083207843,0.28925575790240793,0.26510857531157905,0.16980587013167159,0.25062289064385151,0.41558447889621736,0.45029569220779003,0.14818898015117596,0.24797568630680453,0.44901247820379836,0.1443395486924097,0.20438305675816712,0.30484132361102173,0.024061660257882259,0.2227113394610932,0.10206885950866419,0.56661660277767611,0.48748531457607686,0.19531890878253322,0.25460135838961984,0.22075523207580078,0.29653826666787725,0.24679365576268156,0.069014106085969681,0.35654920465160567,0.10451475969822982,0.23813276552177212,0.29373246769482514,0.11908042476510028,0.18430608485816741,0.10044269370783637,0.27155448145567107,0.29444141265255575,0.60679027448434253,0.034847356169732287,0.45470860355625053,0.16868619400978596,0.18184966437902381,0.32732671951203124,0.22620929676181623,0.038016532070963199,0.26548109011988724,0.38034327485364505,0.22800143113025007,0.26392347734088351,0.30522905052578664,0.2663207300941654,0.081187397531681291,0.15576544177943188,0.29827461707889147,0.28606209552689321,0.45927701512992242,0.12563744405830216,0.15180459789897768,0.033686242169208312,0.38107755789812375,0.29967345419023389,0.23079215689086666,0.13013637926373925,0.036743371498905004,0.33518122176895759,0.40641795724774049,0.54932855116360935,0.38071250507265014,0.34721778404160086,0.40712366481690604,0.35096935262039852,0.41604636359525216,0.41066438742920608],"text":["fitted:  0.418552974<br />sqrt_abs_resid: 0.24788511<br />Mexico","fitted:  0.673434616<br />sqrt_abs_resid: 0.13577413<br />Suriname","fitted:  0.859620736<br />sqrt_abs_resid: 0.14959701<br />Sweden","fitted:  0.835284392<br />sqrt_abs_resid: 0.08194881<br />Switzerland","fitted:  0.424500763<br />sqrt_abs_resid: 0.45661717<br />Ghana","fitted:  0.530209636<br />sqrt_abs_resid: 0.34898476<br />South Africa","fitted:  0.593576672<br />sqrt_abs_resid: 0.42711044<br />Japan","fitted: -0.045741821<br />sqrt_abs_resid: 0.25048318<br />Burma/Myanmar","fitted:  0.325060769<br />sqrt_abs_resid: 0.41840264<br />Russia","fitted:  0.375186739<br />sqrt_abs_resid: 0.26797996<br />Albania","fitted:  0.087473147<br />sqrt_abs_resid: 0.26556892<br />Egypt","fitted: -0.039921264<br />sqrt_abs_resid: 0.44149888<br />Yemen","fitted:  0.484169481<br />sqrt_abs_resid: 0.19018276<br />Colombia","fitted:  0.668767113<br />sqrt_abs_resid: 0.37713776<br />Poland","fitted:  0.544444610<br />sqrt_abs_resid: 0.47807467<br />Brazil","fitted:  0.788402286<br />sqrt_abs_resid: 0.13637343<br />United States of America","fitted:  0.803543692<br />sqrt_abs_resid: 0.20604928<br />Portugal","fitted:  0.369456536<br />sqrt_abs_resid: 0.11600231<br />El Salvador","fitted:  0.170260753<br />sqrt_abs_resid: 0.21386736<br />Bangladesh","fitted:  0.396294951<br />sqrt_abs_resid: 0.26777798<br />Bolivia","fitted:  0.170289846<br />sqrt_abs_resid: 0.16646367<br />Haiti","fitted:  0.382151107<br />sqrt_abs_resid: 0.25719857<br />Honduras","fitted:  0.283538871<br />sqrt_abs_resid: 0.36940646<br />Mali","fitted:  0.182522528<br />sqrt_abs_resid: 0.08647238<br />Pakistan","fitted:  0.502157624<br />sqrt_abs_resid: 0.38709479<br />Peru","fitted:  0.498648936<br />sqrt_abs_resid: 0.18534040<br />Senegal","fitted:  0.020615221<br />sqrt_abs_resid: 0.20587564<br />Sudan","fitted:  0.382183358<br />sqrt_abs_resid: 0.52075268<br />Vietnam","fitted:  0.090681752<br />sqrt_abs_resid: 0.36512771<br />Afghanistan","fitted:  0.533078141<br />sqrt_abs_resid: 0.30318618<br />Argentina","fitted:  0.294191059<br />sqrt_abs_resid: 0.42800825<br />Ethiopia","fitted:  0.346404407<br />sqrt_abs_resid: 0.47285896<br />India","fitted:  0.236338432<br />sqrt_abs_resid: 0.34736374<br />Kenya","fitted:  0.067280869<br />sqrt_abs_resid: 0.23082649<br />North Korea","fitted:  0.613741314<br />sqrt_abs_resid: 0.39402879<br />South Korea","fitted:  0.178938675<br />sqrt_abs_resid: 0.28471271<br />Lebanon","fitted:  0.262168690<br />sqrt_abs_resid: 0.18929160<br />Nigeria","fitted:  0.362515696<br />sqrt_abs_resid: 0.10731121<br />Philippines","fitted:  0.482785462<br />sqrt_abs_resid: 0.28772463<br />Tanzania","fitted:  0.547176132<br />sqrt_abs_resid: 0.35752464<br />Taiwan","fitted:  0.301082930<br />sqrt_abs_resid: 0.35508158<br />Thailand","fitted:  0.353996136<br />sqrt_abs_resid: 0.30495268<br />Uganda","fitted:  0.389898453<br />sqrt_abs_resid: 0.47106099<br />Venezuela","fitted:  0.460947270<br />sqrt_abs_resid: 0.28818871<br />Benin","fitted:  0.473037383<br />sqrt_abs_resid: 0.55139585<br />Bhutan","fitted:  0.437349709<br />sqrt_abs_resid: 0.30716398<br />Burkina Faso","fitted:  0.137188885<br />sqrt_abs_resid: 0.12324319<br />Cambodia","fitted:  0.278891971<br />sqrt_abs_resid: 0.51294057<br />Indonesia","fitted:  0.433891697<br />sqrt_abs_resid: 0.34625380<br />Mozambique","fitted:  0.195681436<br />sqrt_abs_resid: 0.13160002<br />Nepal","fitted:  0.337486402<br />sqrt_abs_resid: 0.11613097<br />Nicaragua","fitted:  0.356974152<br />sqrt_abs_resid: 0.26462397<br />Niger","fitted:  0.487572345<br />sqrt_abs_resid: 0.26186322<br />Zambia","fitted:  0.277798330<br />sqrt_abs_resid: 0.35608753<br />Zimbabwe","fitted:  0.076390599<br />sqrt_abs_resid: 0.18603602<br />Guinea","fitted:  0.302406613<br />sqrt_abs_resid: 0.03750483<br />Ivory Coast","fitted:  0.173601238<br />sqrt_abs_resid: 0.22715906<br />Mauritania","fitted:  0.817057014<br />sqrt_abs_resid: 0.22816006<br />Canada","fitted:  0.825768730<br />sqrt_abs_resid: 0.11059507<br />Australia","fitted:  0.537345572<br />sqrt_abs_resid: 0.29095434<br />Botswana","fitted:  0.240413455<br />sqrt_abs_resid: 0.22893985<br />Burundi","fitted:  0.551639879<br />sqrt_abs_resid: 0.37597888<br />Cape Verde","fitted:  0.175058569<br />sqrt_abs_resid: 0.13394563<br />Central African Republic","fitted:  0.729622946<br />sqrt_abs_resid: 0.32615495<br />Chile","fitted:  0.730796713<br />sqrt_abs_resid: 0.34957587<br />Costa Rica","fitted:  0.469426804<br />sqrt_abs_resid: 0.23329553<br />Timor-Leste","fitted:  0.459382788<br />sqrt_abs_resid: 0.06014326<br />Ecuador","fitted:  0.796082104<br />sqrt_abs_resid: 0.08898256<br />France","fitted:  0.859339383<br />sqrt_abs_resid: 0.11251941<br />Germany","fitted:  0.308153864<br />sqrt_abs_resid: 0.27358022<br />Guatemala","fitted:  0.064334300<br />sqrt_abs_resid: 0.23593580<br />Iran","fitted:  0.092536189<br />sqrt_abs_resid: 0.38139718<br />Iraq","fitted:  0.814762924<br />sqrt_abs_resid: 0.03517209<br />Ireland","fitted:  0.730812094<br />sqrt_abs_resid: 0.21951744<br />Italy","fitted:  0.324193606<br />sqrt_abs_resid: 0.34233552<br />Jordan","fitted:  0.684064747<br />sqrt_abs_resid: 0.14810555<br />Latvia","fitted:  0.399251131<br />sqrt_abs_resid: 0.23822021<br />Lesotho","fitted:  0.381015913<br />sqrt_abs_resid: 0.33909304<br />Liberia","fitted:  0.383394165<br />sqrt_abs_resid: 0.11573316<br />Malawi","fitted:  0.228614024<br />sqrt_abs_resid: 0.31876955<br />Maldives","fitted:  0.413764615<br />sqrt_abs_resid: 0.38240735<br />Mongolia","fitted:  0.321452598<br />sqrt_abs_resid: 0.30733141<br />Morocco","fitted:  0.832668578<br />sqrt_abs_resid: 0.10802119<br />Netherlands","fitted:  0.504074258<br />sqrt_abs_resid: 0.22566733<br />Panama","fitted:  0.185499366<br />sqrt_abs_resid: 0.46097791<br />Papua New Guinea","fitted:  0.196005118<br />sqrt_abs_resid: 0.31305769<br />Qatar","fitted:  0.288841421<br />sqrt_abs_resid: 0.24527246<br />Sierra Leone","fitted:  0.837540419<br />sqrt_abs_resid: 0.16595306<br />Spain","fitted:  0.073322071<br />sqrt_abs_resid: 0.14602079<br />Syria","fitted:  0.259323012<br />sqrt_abs_resid: 0.40165036<br />Tunisia","fitted:  0.315926220<br />sqrt_abs_resid: 0.42435101<br />Türkiye","fitted:  0.389339690<br />sqrt_abs_resid: 0.09664207<br />Ukraine","fitted:  0.801291560<br />sqrt_abs_resid: 0.06861807<br />United Kingdom","fitted:  0.746543057<br />sqrt_abs_resid: 0.28715317<br />Uruguay","fitted:  0.282792964<br />sqrt_abs_resid: 0.33881110<br />Algeria","fitted:  0.216948176<br />sqrt_abs_resid: 0.35063967<br />Angola","fitted:  0.268428660<br />sqrt_abs_resid: 0.28005117<br />Armenia","fitted:  0.179725806<br />sqrt_abs_resid: 0.32668916<br />Azerbaijan","fitted:  0.529519954<br />sqrt_abs_resid: 0.65766249<br />Belarus","fitted:  0.234503818<br />sqrt_abs_resid: 0.27659324<br />Cameroon","fitted:  0.069892994<br />sqrt_abs_resid: 0.16157663<br />Chad","fitted:  0.316082546<br />sqrt_abs_resid: 0.51096237<br />China","fitted:  0.099900750<br />sqrt_abs_resid: 0.14525581<br />Democratic Republic of the Congo","fitted:  0.005673403<br />sqrt_abs_resid: 0.29719791<br />Republic of the Congo","fitted:  0.199668893<br />sqrt_abs_resid: 0.28925576<br />Djibouti","fitted:  0.423282557<br />sqrt_abs_resid: 0.26510858<br />Dominican Republic","fitted: -0.023834034<br />sqrt_abs_resid: 0.16980587<br />Eritrea","fitted:  0.268811833<br />sqrt_abs_resid: 0.25062289<br />Gabon","fitted:  0.289710459<br />sqrt_abs_resid: 0.41558448<br />The Gambia","fitted:  0.580766210<br />sqrt_abs_resid: 0.45029569<br />Georgia","fitted:  0.257040026<br />sqrt_abs_resid: 0.14818898<br />Guinea-Bissau","fitted:  0.699491941<br />sqrt_abs_resid: 0.24797569<br />Jamaica","fitted:  0.325612206<br />sqrt_abs_resid: 0.44901248<br />Kazakhstan","fitted:  0.206833905<br />sqrt_abs_resid: 0.14433955<br />Kyrgyzstan","fitted:  0.119772434<br />sqrt_abs_resid: 0.20438306<br />Laos","fitted: -0.049928233<br />sqrt_abs_resid: 0.30484132<br />Libya","fitted:  0.257578963<br />sqrt_abs_resid: 0.02406166<br />Madagascar","fitted:  0.394600341<br />sqrt_abs_resid: 0.22271134<br />Moldova","fitted:  0.563418052<br />sqrt_abs_resid: 0.10206886<br />Namibia","fitted:  0.447054375<br />sqrt_abs_resid: 0.56661660<br />Rwanda","fitted: -0.141641932<br />sqrt_abs_resid: 0.48748531<br />Somalia","fitted:  0.285149476<br />sqrt_abs_resid: 0.19531891<br />Sri Lanka","fitted:  0.161821852<br />sqrt_abs_resid: 0.25460136<br />Eswatini","fitted:  0.122732872<br />sqrt_abs_resid: 0.22075523<br />Tajikistan","fitted:  0.277934944<br />sqrt_abs_resid: 0.29653827<br />Togo","fitted:  0.710907109<br />sqrt_abs_resid: 0.24679366<br />Trinidad and Tobago","fitted:  0.019762947<br />sqrt_abs_resid: 0.06901411<br />Turkmenistan","fitted:  0.159127335<br />sqrt_abs_resid: 0.35654920<br />Uzbekistan","fitted:  0.800923335<br />sqrt_abs_resid: 0.10451476<br />Austria","fitted:  0.147707214<br />sqrt_abs_resid: 0.23813277<br />Bahrain","fitted:  0.734278763<br />sqrt_abs_resid: 0.29373247<br />Barbados","fitted:  0.839180148<br />sqrt_abs_resid: 0.11908042<br />Belgium","fitted:  0.382031267<br />sqrt_abs_resid: 0.18430608<br />Bosnia and Herzegovina","fitted:  0.600911265<br />sqrt_abs_resid: 0.10044269<br />Bulgaria","fitted:  0.178258164<br />sqrt_abs_resid: 0.27155448<br />Comoros","fitted:  0.548304255<br />sqrt_abs_resid: 0.29444141<br />Croatia","fitted:  0.411194437<br />sqrt_abs_resid: 0.60679027<br />Cuba","fitted:  0.712785662<br />sqrt_abs_resid: 0.03484736<br />Cyprus","fitted:  0.622240086<br />sqrt_abs_resid: 0.45470860<br />Czechia","fitted:  0.866544968<br />sqrt_abs_resid: 0.16868619<br />Denmark","fitted:  0.089069300<br />sqrt_abs_resid: 0.18184966<br />Equatorial Guinea","fitted:  0.702857219<br />sqrt_abs_resid: 0.32732672<br />Estonia","fitted:  0.323170646<br />sqrt_abs_resid: 0.22620930<br />Fiji","fitted:  0.844554743<br />sqrt_abs_resid: 0.03801653<br />Finland","fitted:  0.738519791<br />sqrt_abs_resid: 0.26548109<br />Greece","fitted:  0.520661007<br />sqrt_abs_resid: 0.38034327<br />Guyana","fitted:  0.830984653<br />sqrt_abs_resid: 0.22800143<br />Iceland","fitted:  0.622344398<br />sqrt_abs_resid: 0.26392348<br />Israel","fitted:  0.199835227<br />sqrt_abs_resid: 0.30522905<br />Kuwait","fitted:  0.693073269<br />sqrt_abs_resid: 0.26632073<br />Lithuania","fitted:  0.795591394<br />sqrt_abs_resid: 0.08118740<br />Luxembourg","fitted:  0.477262873<br />sqrt_abs_resid: 0.15576544<br />North Macedonia","fitted:  0.298967747<br />sqrt_abs_resid: 0.29827462<br />Malaysia","fitted:  0.693831522<br />sqrt_abs_resid: 0.28606210<br />Malta","fitted:  0.439064623<br />sqrt_abs_resid: 0.45927702<br />Mauritius","fitted:  0.389784767<br />sqrt_abs_resid: 0.12563744<br />Montenegro","fitted:  0.854044636<br />sqrt_abs_resid: 0.15180460<br />New Zealand","fitted:  0.861865237<br />sqrt_abs_resid: 0.03368624<br />Norway","fitted:  0.270220105<br />sqrt_abs_resid: 0.38107756<br />Oman","fitted:  0.343195821<br />sqrt_abs_resid: 0.29967345<br />Paraguay","fitted:  0.414734980<br />sqrt_abs_resid: 0.23079216<br />Romania","fitted:  0.523064523<br />sqrt_abs_resid: 0.13013638<br />Sao Tome and Principe","fitted:  0.044350075<br />sqrt_abs_resid: 0.03674337<br />Saudi Arabia","fitted:  0.413653549<br />sqrt_abs_resid: 0.33518122<br />Serbia","fitted:  0.523175556<br />sqrt_abs_resid: 0.40641796<br />Seychelles","fitted:  0.613761857<br />sqrt_abs_resid: 0.54932855<br />Singapore","fitted:  0.583057988<br />sqrt_abs_resid: 0.38071251<br />Slovakia","fitted:  0.620439810<br />sqrt_abs_resid: 0.34721778<br />Slovenia","fitted:  0.180250322<br />sqrt_abs_resid: 0.40712366<br />Solomon Islands","fitted:  0.384820514<br />sqrt_abs_resid: 0.35096935<br />Vanuatu","fitted:  0.245094577<br />sqrt_abs_resid: 0.41604636<br />United Arab Emirates","fitted:  0.576354761<br />sqrt_abs_resid: 0.41066439<br />Hungary"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":0.59999999999999998,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.1416419319273366,-0.12888007243521218,-0.11611821294308775,-0.10335635345096333,-0.090594493958838895,-0.077832634466714484,-0.065070774974590059,-0.052308915482465634,-0.039547055990341209,-0.026785196498216784,-0.014023337006092373,-0.0012614775139679346,0.011500381978156476,0.024262241470280915,0.037024100962405326,0.049785960454529765,0.062547819946654176,0.075309679438778587,0.088071538930903026,0.10083339842302744,0.11359525791515185,0.12635711740727629,0.13911897689940073,0.15188083639152516,0.16464269588364955,0.17740455537577399,0.19016641486789843,0.20292827436002281,0.21569013385214725,0.22845199334427169,0.24121385283639613,0.25397571232852051,0.26673757182064495,0.27949943131276939,0.29226129080489377,0.30502315029701821,0.31778500978914265,0.33054686928126709,0.34330872877339147,0.35607058826551591,0.36883244775764029,0.38159430724976479,0.39435616674188917,0.40711802623401355,0.41987988572613805,0.43264174521826243,0.44540360471038692,0.45816546420251131,0.47092732369463569,0.48368918318676019,0.49645104267888457,0.50921290217100901,0.52197476166313339,0.53473662115525777,0.54749848064738216,0.56026034013950676,0.57302219963163115,0.58578405912375553,0.59854591861587991,0.6113077781080043,0.6240696376001289,0.63683149709225328,0.64959335658437767,0.66235521607650205,0.67511707556862643,0.68787893506075082,0.70064079455287542,0.71340265404499981,0.72616451353712419,0.73892637302924857,0.75168823252137296,0.76445009201349756,0.77721195150562195,0.78997381099774633,0.80273567048987071,0.8154975299819951,0.82825938947411948,0.84102124896624408,0.85378310845836847,0.86654496795049285],"y":[0.32924545716016701,0.32096448082367812,0.31309584899616738,0.30564570679616804,0.2986201993422134,0.29202547175283661,0.2858676691465708,0.28015293664194924,0.2748874193575051,0.2700772624117716,0.26572861092328193,0.26184761001056928,0.25844040479216684,0.25551314038660777,0.25307196191242537,0.25112301448815277,0.24967244323232321,0.24872639326346982,0.24829100970012588,0.24837243766082448,0.24897682226409898,0.25011030862848238,0.25178623822364909,0.25435003103301312,0.25781094072357791,0.26192106958973288,0.26643251992586736,0.27109739402637095,0.27566779418563309,0.27989582269804325,0.28362116846764135,0.28715281956177108,0.29051772293667055,0.29367950738737342,0.29660180170891304,0.29923024979974744,0.30105301395715883,0.30210285538198445,0.30272289399001456,0.30325624969703935,0.30404604241884914,0.30543539207123416,0.30747130370212539,0.30972496865294608,0.31205849112261008,0.31434038477020376,0.31643916325481375,0.31822334023552673,0.31956142937142923,0.32088680434231864,0.32295993324389671,0.32541836810150654,0.32787633649828724,0.32994806601737769,0.33124778424191731,0.33138971875504514,0.32998809713990035,0.32678088990312665,0.32268529707652599,0.31796024625621194,0.31259282197532867,0.3065701087670204,0.29987919116443101,0.29250715370070474,0.28444108090898557,0.27566805732241756,0.26617516747414466,0.25594949589731125,0.24497812712506134,0.23324817579163937,0.22078059042374612,0.20760156161265558,0.19371157724063698,0.17911112518995909,0.16380069334289071,0.1477807695817008,0.1310518417886582,0.11361439784603147,0.095468925636090121,0.076615913041102726],"text":["fitted: -0.141641932<br />sqrt_abs_resid: 0.32924546","fitted: -0.128880072<br />sqrt_abs_resid: 0.32096448","fitted: -0.116118213<br />sqrt_abs_resid: 0.31309585","fitted: -0.103356353<br />sqrt_abs_resid: 0.30564571","fitted: -0.090594494<br />sqrt_abs_resid: 0.29862020","fitted: -0.077832634<br />sqrt_abs_resid: 0.29202547","fitted: -0.065070775<br />sqrt_abs_resid: 0.28586767","fitted: -0.052308915<br />sqrt_abs_resid: 0.28015294","fitted: -0.039547056<br />sqrt_abs_resid: 0.27488742","fitted: -0.026785196<br />sqrt_abs_resid: 0.27007726","fitted: -0.014023337<br />sqrt_abs_resid: 0.26572861","fitted: -0.001261478<br />sqrt_abs_resid: 0.26184761","fitted:  0.011500382<br />sqrt_abs_resid: 0.25844040","fitted:  0.024262241<br />sqrt_abs_resid: 0.25551314","fitted:  0.037024101<br />sqrt_abs_resid: 0.25307196","fitted:  0.049785960<br />sqrt_abs_resid: 0.25112301","fitted:  0.062547820<br />sqrt_abs_resid: 0.24967244","fitted:  0.075309679<br />sqrt_abs_resid: 0.24872639","fitted:  0.088071539<br />sqrt_abs_resid: 0.24829101","fitted:  0.100833398<br />sqrt_abs_resid: 0.24837244","fitted:  0.113595258<br />sqrt_abs_resid: 0.24897682","fitted:  0.126357117<br />sqrt_abs_resid: 0.25011031","fitted:  0.139118977<br />sqrt_abs_resid: 0.25178624","fitted:  0.151880836<br />sqrt_abs_resid: 0.25435003","fitted:  0.164642696<br />sqrt_abs_resid: 0.25781094","fitted:  0.177404555<br />sqrt_abs_resid: 0.26192107","fitted:  0.190166415<br />sqrt_abs_resid: 0.26643252","fitted:  0.202928274<br />sqrt_abs_resid: 0.27109739","fitted:  0.215690134<br />sqrt_abs_resid: 0.27566779","fitted:  0.228451993<br />sqrt_abs_resid: 0.27989582","fitted:  0.241213853<br />sqrt_abs_resid: 0.28362117","fitted:  0.253975712<br />sqrt_abs_resid: 0.28715282","fitted:  0.266737572<br />sqrt_abs_resid: 0.29051772","fitted:  0.279499431<br />sqrt_abs_resid: 0.29367951","fitted:  0.292261291<br />sqrt_abs_resid: 0.29660180","fitted:  0.305023150<br />sqrt_abs_resid: 0.29923025","fitted:  0.317785010<br />sqrt_abs_resid: 0.30105301","fitted:  0.330546869<br />sqrt_abs_resid: 0.30210286","fitted:  0.343308729<br />sqrt_abs_resid: 0.30272289","fitted:  0.356070588<br />sqrt_abs_resid: 0.30325625","fitted:  0.368832448<br />sqrt_abs_resid: 0.30404604","fitted:  0.381594307<br />sqrt_abs_resid: 0.30543539","fitted:  0.394356167<br />sqrt_abs_resid: 0.30747130","fitted:  0.407118026<br />sqrt_abs_resid: 0.30972497","fitted:  0.419879886<br />sqrt_abs_resid: 0.31205849","fitted:  0.432641745<br />sqrt_abs_resid: 0.31434038","fitted:  0.445403605<br />sqrt_abs_resid: 0.31643916","fitted:  0.458165464<br />sqrt_abs_resid: 0.31822334","fitted:  0.470927324<br />sqrt_abs_resid: 0.31956143","fitted:  0.483689183<br />sqrt_abs_resid: 0.32088680","fitted:  0.496451043<br />sqrt_abs_resid: 0.32295993","fitted:  0.509212902<br />sqrt_abs_resid: 0.32541837","fitted:  0.521974762<br />sqrt_abs_resid: 0.32787634","fitted:  0.534736621<br />sqrt_abs_resid: 0.32994807","fitted:  0.547498481<br />sqrt_abs_resid: 0.33124778","fitted:  0.560260340<br />sqrt_abs_resid: 0.33138972","fitted:  0.573022200<br />sqrt_abs_resid: 0.32998810","fitted:  0.585784059<br />sqrt_abs_resid: 0.32678089","fitted:  0.598545919<br />sqrt_abs_resid: 0.32268530","fitted:  0.611307778<br />sqrt_abs_resid: 0.31796025","fitted:  0.624069638<br />sqrt_abs_resid: 0.31259282","fitted:  0.636831497<br />sqrt_abs_resid: 0.30657011","fitted:  0.649593357<br />sqrt_abs_resid: 0.29987919","fitted:  0.662355216<br />sqrt_abs_resid: 0.29250715","fitted:  0.675117076<br />sqrt_abs_resid: 0.28444108","fitted:  0.687878935<br />sqrt_abs_resid: 0.27566806","fitted:  0.700640795<br />sqrt_abs_resid: 0.26617517","fitted:  0.713402654<br />sqrt_abs_resid: 0.25594950","fitted:  0.726164514<br />sqrt_abs_resid: 0.24497813","fitted:  0.738926373<br />sqrt_abs_resid: 0.23324818","fitted:  0.751688233<br />sqrt_abs_resid: 0.22078059","fitted:  0.764450092<br />sqrt_abs_resid: 0.20760156","fitted:  0.777211952<br />sqrt_abs_resid: 0.19371158","fitted:  0.789973811<br />sqrt_abs_resid: 0.17911113","fitted:  0.802735670<br />sqrt_abs_resid: 0.16380069","fitted:  0.815497530<br />sqrt_abs_resid: 0.14778077","fitted:  0.828259389<br />sqrt_abs_resid: 0.13105184","fitted:  0.841021249<br />sqrt_abs_resid: 0.11361440","fitted:  0.853783108<br />sqrt_abs_resid: 0.09546893","fitted:  0.866544968<br />sqrt_abs_resid: 0.07661591"],"type":"scatter","mode":"lines","name":"fitted values","line":{"width":3.7795275590551185,"color":"rgba(0,0,255,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826498,"l":43.105022831050235},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Scale-Location Plot","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.19205127692122806,0.91695431294438434],"tickmode":"array","ticktext":["0.0","0.3","0.6","0.9"],"tickvals":[0,0.30000000000000004,0.60000000000000009,0.90000000000000024],"categoryorder":"array","categoryarray":["0.0","0.3","0.6","0.9"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Fitted Values","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.0076183813532706181,0.68934253409209267],"tickmode":"array","ticktext":["0.0","0.2","0.4","0.6"],"tickvals":[0,0.19999999999999998,0.39999999999999997,0.60000000000000009],"categoryorder":"array","categoryarray":["0.0","0.2","0.4","0.6"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"√|Residuals|","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":false},"source":"A","attrs":{"165e925016609":{"x":{},"y":{},"text":{},"type":"scatter"},"165e97ed1ebd9":{"x":{},"y":{}}},"cur_data":"165e925016609","visdat":{"165e925016609":["function (y) ","x"],"165e97ed1ebd9":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Here we are looking for a roughly horizontal blue line and equal spread of points across all fitted values. If the blue line shows an increasing or decreasing trend, this suggests <strong>heteroscedasticity</strong>. Heteroscedasticity means that the variance of residuals changes with fitted values, which violates the equal variance assumption. The most common pattern is increasing variance with larger fitted values, which appears as an upward-sloping trend in this plot.</p>
<p>With our data we are seeing a line that slopes downward, then upward and then downward again. This pattern suggests that our model performs most consistently when predicting highly democratic countries (mainly established Western democracies with stable institutions), while showing much more variability when predicting countries with low to moderate democracy scores (possibly reflecting the inherent volatility and unpredictability of transitional political systems or authoritarian regimes).</p>
<p>Substantively, this heteroscedasticity pattern makes theoretical sense—established democracies are more predictable based on economic and social indicators, while countries undergoing political transitions or operating under authoritarian systems may be subject to sudden changes that our model cannot capture. From a statistical perspective, however, this represents a clear violation of the equal variance assumption, indicating that our standard errors may be incorrect and that we should use <strong>robust standard errors</strong> when making statistical inferences.</p>
</section></section><section id="automated-diagnostics" class="level2"><h2 class="anchored" data-anchor-id="automated-diagnostics">Automated Diagnostics</h2>
<p>Now that we know what the basic residual plots are and how to interpret them, we can lighten our load a little bit by using a package that automates the diagnostic process. The <code>performance</code> package provides a convenient <code><a href="https://easystats.github.io/performance/reference/check_model.html">check_model()</a></code> function that generates a comprehensive set of diagnostic plots and statistics for our fitted model. This function produces the same types of plots we created manually and also includes additional diagnostics like multicollinearity checks (VIF values) and checks for influential observations.</p>
<p>Let’s try running <code><a href="https://easystats.github.io/performance/reference/check_model.html">check_model()</a></code> on our democracy model to see what it tells us about our assumptions:</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://easystats.github.io/performance/">performance</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://easystats.github.io/performance/reference/check_model.html">check_model</a></span><span class="op">(</span><span class="va">democracy_model</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="module-4.6_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Here we we see the same issues highlighted in terms of linearity, normality, and equal variance that we identified manually. The residuals versus fitted plot shows a clear non-linear pattern, the Q-Q plot indicates slight deviations from normality, and the scale-location plot suggests heteroscedasticity. The VIF values indicate that multicollinearity is not a concern in this model, as all values are below the common threshold of 5 and there are no influential observations.</p>
<section id="variable-level-diagnostics-with-ggally" class="level3"><h3 class="anchored" data-anchor-id="variable-level-diagnostics-with-ggally">Variable-level Diagnostics with GGally</h3>
<p>Now that we know we have these issues, we can use the <code>GGally</code> package to create variable-level diagnostic plots that help us understand how each predictor contributes to these patterns. The <code><a href="https://ggobi.github.io/ggally/reference/ggnostic.html">ggnostic()</a></code> function provides a comprehensive set of diagnostic plots for each predictor in our model, allowing us to see how they relate to the residuals and fitted values.</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggobi.github.io/ggally/reference/ggnostic.html">ggnostic</a></span><span class="op">(</span><span class="va">democracy_model</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="module-4.6_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The <code><a href="https://ggobi.github.io/ggally/reference/ggnostic.html">ggnostic()</a></code> output helps us identify the specific source of the issues that the <code><a href="https://easystats.github.io/performance/reference/check_model.html">check_model()</a></code> diagnostics revealed concerning patterns of non-linearity and heteroscedasticity in our overall model. Examining the first two rows of the <code><a href="https://ggobi.github.io/ggally/reference/ggnostic.html">ggnostic()</a></code> plots, we can see that the women empowerment variable stands out with a distinctly wiggly blue line in the residuals plot and changing variance patterns in the scale-location plot, while other predictors show relatively flat, well-behaved relationships. This suggests that women empowerment is contributing to the assumption violations we observed in the overall model diagnostics.</p>
</section></section><section id="fixing-the-problems-transformation-strategies" class="level2"><h2 class="anchored" data-anchor-id="fixing-the-problems-transformation-strategies">Fixing the Problems: Transformation Strategies</h2>
<p>When we detect assumption violations, we have several remedial strategies available. <strong>Variable transformations</strong> are often the first line of defense because they can simultaneously address multiple issues.</p>
<p><strong>Log transformations</strong> are particularly useful for skewed relationships and can address both non-linearity and heteroscedasticity simultaneously. We’ve already seen how log transformations help with wealth data, which tends to be highly skewed with a few very wealthy countries. Another option for addressing nonlinearity is to add polynomial terms, which allow us to capture curved relationships without transforming the original variable.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>There are many other strategies for addressing assumption violations, such as adding interaction terms, using robust standard errors, or employing generalized linear models. However, variable transformations are often the most straightforward and effective first step and also the most suitable for an introductory module like this one. As you gain more experience, you can learn about more strategies and how to apply them.</p>
</div>
</div>
<p>To address the model assumptions we identified in our democracy model, we can implement both a logarithmic transformation and a polynomial term for women empowerment <code>log(women_empowerment) + I(log(women_empowerment)^2)</code>, allowing the model to capture the curved relationship and potentially reducing both the systematic residual patterns and heteroscedasticity that were evident in our original specification.</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Fit our democracy model</span></span>
<span><span class="va">democracy_model2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">lib_dem</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">wealth</span><span class="op">)</span> <span class="op">+</span> <span class="va">polarization</span> <span class="op">+</span> <span class="va">corruption</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">women_empowerment</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html">I</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">women_empowerment</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="va">region</span>, data <span class="op">=</span> <span class="va">model_data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Quick model summary</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">democracy_model2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = lib_dem ~ log(wealth) + polarization + corruption + 
    log(women_empowerment) + I(log(women_empowerment)^2) + region, 
    data = model_data)

Residuals:
     Min       1Q   Median       3Q      Max 
-0.43129 -0.06233  0.00449  0.07454  0.25560 

Coefficients:
                             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                  0.786701   0.059870  13.140  &lt; 2e-16 ***
log(wealth)                 -0.006507   0.014176  -0.459  0.64682    
polarization                -0.010578   0.008298  -1.275  0.20421    
corruption                  -0.326338   0.055780  -5.850 2.66e-08 ***
log(women_empowerment)       0.706621   0.102286   6.908 1.08e-10 ***
I(log(women_empowerment)^2)  0.250075   0.054304   4.605 8.33e-06 ***
regionLatin America          0.063280   0.033694   1.878  0.06218 .  
regionMENA                   0.002799   0.043352   0.065  0.94860    
regionSS Africa             -0.012929   0.034752  -0.372  0.71035    
regionThe West               0.110825   0.039155   2.830  0.00524 ** 
regionAsia &amp; Pacific        -0.017515   0.036552  -0.479  0.63246    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.1222 on 161 degrees of freedom
  (5 observations deleted due to missingness)
Multiple R-squared:  0.8086,    Adjusted R-squared:  0.7967 
F-statistic: 68.03 on 10 and 161 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Understanding the Code
</div>
</div>
<div class="callout-body-container callout-body">
<p>Here we use the inhibit <code><a href="https://rdrr.io/r/base/AsIs.html">I()</a></code> function so that R treats it is a literal mathematical expression, e.g.&nbsp;“take the log of <code>women_empowerment</code> and then square it”. This allows us to include polynomial terms in our model without R interpreting them as interaction terms of special formula operators.</p>
</div>
</div>
<p>The results of the analysis are interesting from a substantive perspective. Both the linear term and the quadratic term are positive and statistically significant. This suggests an upward opening parabola, whereby as women’s empowerment increases, democracy increases at an accelerating rate. Now let’s run <code><a href="https://easystats.github.io/performance/reference/check_model.html">check_model()</a></code> on our new democracy model and see if our transformations had the desired effect with respect to satisfying model assumptions:</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://easystats.github.io/performance/reference/check_model.html">check_model</a></span><span class="op">(</span><span class="va">democracy_model2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="module-4.6_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Here we see a slight improvement in our plots. The residuals versus fitted plot still shows some non-linearity, but the pattern is less pronounced than before. The Q-Q plot shows that the residuals are closer to normality, and the scale-location plot indicates that the variance of residuals is more constant across fitted values.</p>
<p>We definitely still have a high degree of heteroscedasticity, which could be an argument in favor of using robust standard errors or considering a different modeling approach, but at least this provides you with a sense of how we can systematically address assumption violations with the help of diagnostic plots.</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Your Turn!
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Try running <code>ggnostic(democracy_model2)</code> to see how the variable-level diagnostics have changed. Are there any other predictors that could benefit from transformations?</li>
<li>Try tansforming the corruption variable using a log transformation and see how that affects the model diagnostics using <code><a href="https://easystats.github.io/performance/reference/check_model.html">check_model()</a></code>. Does it help with the non-linearity or heteroscedasticity?</li>
<li>Now try adding a polynomial term for polarization, e.g.&nbsp;<code>I(polarization^2)</code>, and see how that affects the model diagnostics. Does it help with the non-linearity or heteroscedasticity?</li>
<li>Try running <code><a href="https://ggobi.github.io/ggally/reference/ggnostic.html">ggnostic()</a></code> on your new model and make any additional changes as you see fit.</li>
</ul>
</div>
</div>
</section><section id="conclusion" class="level2"><h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Checking model assumptions is not just a statistical formality but an essential component of producing reliable, interpretable results. The combination of thorough exploratory data analysis and systematic residual diagnostics gives you confidence that your models are appropriate for your data and research questions.</p>
<p>The process we’ve outlined—starting with comprehensive EDA, fitting thoughtfully chosen models, and systematically checking assumptions—represents best practice in regression analysis. This approach helps you catch problems early, make informed decisions about model specifications, and communicate limitations honestly to your audience.</p>
<p>Remember that linear regression remains one of the most powerful and interpretable tools in data science, but like any tool, it works best when used appropriately. Perfect adherence to all assumptions is rare in real-world data, so developing judgment about when violations matter and when they don’t is crucial for practical data analysis.</p>
<p>In our next module, we’ll build on these foundations to explore more advanced modeling techniques and learn when linear regression might not be the right tool for the job. Understanding when and why linear regression works prepares you to recognize situations where alternative approaches might be more appropriate.</p>


</section>
</div>
</div>

</main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/ds4all\.rocks");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>© Copyright 2025, <a href="https://emmanuel.teitelbaum.com">Emmanuel Teitelbaum</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions"><ul><li><a href="https://github.com/eteitelbaum/dats1001-summer/edit/main/modules/module-4.6.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/eteitelbaum/dats1001-summer/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This page is built with <a href="https://quarto.org/">Quarto</a>. 👷🛠️</p>
</div>
  </div>
</footer>


</body></html>